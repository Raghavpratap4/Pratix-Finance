<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Income Tax Calculator - Pratix Finance</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(to bottom right, #e0f7ff, #ffffff);
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      flex-direction: column;
      min-height: 100vh;
    }
    .container {
      background: #fff;
      border-radius: 20px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.1);
      padding: 30px;
      max-width: 600px;
      width: 100%;
      margin: 0 auto;
      margin-top: 20px;
      text-align: center;
      animation: fadeIn 0.6s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    h1, h2 {
      color: #0077b6;
      margin-bottom: 20px;
    }
    select, input, button {
      padding: 12px;
      margin: 8px 0;
      width: 100%;
      border: 1px solid #ccc;
      border-radius: 10px;
      font-size: 1em;
      transition: all 0.3s ease;
    }
    button {
      background: #00b4d8;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #0077b6;
    }
    #results, #preview-area {
      margin-top: 20px;
    }
    canvas {
      max-width: 100%;
      margin-top: 20px;
    }
    .footer {
      margin-top: 40px;
      background: #f0f0f0;
      padding: 20px;
      border-radius: 12px;
      text-align: left;
      max-width: 600px;
    }
    @media screen and (max-width: 600px) {
      .container, .footer {
        padding: 20px;
      }
    }
  </style>
</head>
<body>
<div class="container">
  <h1>üßÆ Income Tax Calculator</h1>
  <label>üåê Language:</label>
  <select id="language" onchange="changeLanguage()">
    <option value="en">English</option>
    <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
    <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
    <option value="fr">Fran√ßais</option>
    <option value="ru">–†—É—Å—Å–∫–∏–π</option>
    <option value="es">Espa√±ol</option>
    <option value="ja">Êó•Êú¨Ë™û</option>
    <option value="ko">ÌïúÍµ≠Ïñ¥</option>
  </select>
  <input type="number" id="income" placeholder="üí∞ Annual Gross Income (‚Çπ)" oninput="formatCurrency(this)" />
  <input type="number" id="deductions" placeholder="üìâ Total Deductions (‚Çπ)" oninput="formatCurrency(this)" />
  <select id="age">
    <option value="below60">üéÇ Below 60</option>
    <option value="60to80">üéÇ 60 to 80</option>
    <option value="above80">üéÇ Above 80</option>
  </select>
  <select id="regime">
    <option value="old">üìã Old Regime</option>
    <option value="new">üìã New Regime</option>
  </select>
  <button onclick="calculateTax()">Calculate</button>
  <button onclick="resetForm()">Reset</button>
  <button onclick="togglePreview()">Preview</button>
  <div id="results"></div>
  <canvas id="pieChart" style="display:none;"></canvas>
  <canvas id="barChart" style="display:none;"></canvas>
</div>
<div id="preview-area" class="container" style="display:none;">
  <h2>üìÑ Income Tax Summary</h2>
  <div id="preview-results"></div>
  <canvas id="previewPieChart"></canvas>
  <canvas id="previewBarChart"></canvas>
  <button onclick="downloadImage()">üì∏ Download Image</button>
  <button onclick="downloadPDF()">üìÑ Download PDF</button>
  <button onclick="sharePreview()">üîó Share</button>
</div>
<div class="footer">
  <h2>üìò About This Income Tax Calculator</h2>
  <p>This Income Tax Calculator helps individuals in India estimate their income tax liability for the current financial year. Users can calculate taxes under both the <strong>Old</strong> and <strong>New Tax Regimes</strong>, taking into account their age category and applicable deductions.</p>
  <ul>
    <li><strong>Gross Income:</strong> Enter your total annual income before taxes and deductions.</li>
    <li><strong>Deductions:</strong> Available only under the Old Regime. Include deductions like Section 80C, 80D, and HRA.</li>
    <li><strong>Age Category:</strong> Tax slabs vary based on age ‚Äî special exemption for senior citizens.</li>
    <li><strong>Tax Regime:</strong> Choose between Old and New regime to compare tax savings and liability.</li>
  </ul>
  <p>The calculator uses the latest income tax slabs defined by the Government of India for FY 2024‚Äì25. Results are estimated for guidance only and may differ from actual tax liability.</p>
  <p>üì© For queries or feedback, email us at <a href="mailto:pratixfinance@gmail.com">pratixfinance@gmail.com</a></p>
</div>
<script>
function formatCurrency(input) {
  input.value = input.value.replace(/\D/g, '');
}
function calculateTax() {
  const income = parseFloat(document.getElementById('income').value);
  const deductions = parseFloat(document.getElementById('deductions').value) || 0;
  const age = document.getElementById('age').value;
  const regime = document.getElementById('regime').value;
  let taxableIncome = income;
  if (regime === 'old') taxableIncome -= deductions;
  if (taxableIncome < 0) taxableIncome = 0;
  let tax = 0;
  const slabs = {
    old: {
      below60: [250000, 500000, 1000000],
      60to80: [300000, 500000, 1000000],
      above80: [500000, 1000000]
    },
    new: [300000, 600000, 900000, 1200000, 1500000]
  };
  if (regime === 'old') {
    const slab = slabs.old[age];
    if (taxableIncome <= slab[0]) tax = 0;
    else if (taxableIncome <= slab[1]) tax = (taxableIncome - slab[0]) * 0.05;
    else if (taxableIncome <= slab[2]) tax = (slab[1] - slab[0]) * 0.05 + (taxableIncome - slab[1]) * 0.2;
    else tax = (slab[1] - slab[0]) * 0.05 + (slab[2] - slab[1]) * 0.2 + (taxableIncome - slab[2]) * 0.3;
  } else {
    const slab = slabs.new;
    const rates = [0, 0.05, 0.1, 0.15, 0.2, 0.3];
    for (let i = 0; i < slab.length; i++) {
      const lower = slab[i];
      const upper = slab[i + 1] || Infinity;
      if (taxableIncome > lower) tax += (Math.min(taxableIncome, upper) - lower) * rates[i];
    }
  }
  document.getElementById('results').innerHTML = `
    <h3>Taxable Income: ‚Çπ${taxableIncome.toLocaleString()}</h3>
    <h3>Estimated Tax: ‚Çπ${tax.toFixed(2).toLocaleString()}</h3>
  `;
  drawChart(taxableIncome, tax, 'pieChart');
  drawChart(taxableIncome, tax, 'barChart');
  document.getElementById('pieChart').style.display = 'block';
  document.getElementById('barChart').style.display = 'block';
}
function drawChart(income, tax, canvasId) {
  const ctx = document.getElementById(canvasId);
  const chartType = canvasId.includes('Pie') ? 'pie' : 'bar';
  new Chart(ctx, {
    type: chartType,
    data: {
      labels: ['Tax', 'Remaining Income'],
      datasets: [{
        data: [tax, income - tax],
        backgroundColor: ['#ff6384', '#36a2eb']
      }]
    },
    options: { responsive: true, plugins: { legend: { position: 'top' } } }
  });
}
function resetForm() {
  document.getElementById('income').value = '';
  document.getElementById('deductions').value = '';
  document.getElementById('results').innerHTML = '';
  document.getElementById('pieChart').style.display = 'none';
  document.getElementById('barChart').style.display = 'none';
}
function togglePreview() {
  const preview = document.getElementById('preview-area');
  preview.style.display = preview.style.display === 'none' ? 'block' : 'none';
  const resultHTML = document.getElementById('results').innerHTML;
  document.getElementById('preview-results').innerHTML = resultHTML;
  drawChart(
    parseFloat(document.getElementById('income').value),
    parseFloat(document.getElementById('results').textContent.replace(/\D/g, '')),
    'previewPieChart'
  );
  drawChart(
    parseFloat(document.getElementById('income').value),
    parseFloat(document.getElementById('results').textContent.replace(/\D/g, '')),
    'previewBarChart'
  );
}
function downloadImage() {
  html2canvas(document.getElementById('preview-area')).then(canvas => {
    const link = document.createElement('a');
    link.download = 'income-tax-summary.png';
    link.href = canvas.toDataURL();
    link.click();
  });
}
function downloadPDF() {
  html2canvas(document.getElementById('preview-area')).then(canvas => {
    const imgData = canvas.toDataURL('image/png');
    const pdf = new jspdf.jsPDF();
    const imgProps = pdf.getImageProperties(imgData);
    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
    pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);
    pdf.save('income-tax-summary.pdf');
  });
}
function sharePreview() {
  if (navigator.share) {
    navigator.share({
      title: 'Income Tax Summary',
      text: 'Here is my income tax summary.',
      url: window.location.href
    });
  } else {
    alert('Share not supported on this browser.');
  }
}
function changeLanguage() {
  const lang = document.getElementById('language').value;
  // Placeholder for multilingual support
}
</script>
</body>
</html>
