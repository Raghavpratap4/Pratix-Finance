<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <!-- 🧾 Logo + Title -->
    <div class="header">
      <img src="logo.png" alt="Logo" style="display:block; margin:10px auto; max-width:150px;"/>
      <h1 id="gstcalculatortitle">💰 GST CALCULATOR</h1>
    </div>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #e3f2fd, #ffffff);
      margin: 0;
      padding: 0;
      text-align: center;
    }

    header {
      background: #1976d2;
      color: white;
      padding: 1rem;
      font-size: 1.5rem;
    }

    .container {
      max-width: 600px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }

    label {
      display: block;
      margin: 1rem 0 0.5rem;
      font-weight: bold;
      text-align: left;
    }

    input, select, button {
      width: 100%;
      padding: 0.7rem;
      margin-bottom: 1rem;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      background: #1976d2;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #1565c0;
    }

    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .language {
      margin-bottom: 1rem;
      text-align: right;
    }

    #resultSection {
      margin-top: 2rem;
      padding: 1rem;
      background: #f1f8e9;
      border-radius: 10px;
      text-align: left;
    }

    canvas {
      max-width: 100%;
      margin-top: 20px;
    }

    #previewMode {
      display: none;
      padding: 1rem;
      margin-top: 1rem;
      background: #e3f2fd;
      border-radius: 12px;
    }

    .download-btns {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
  </style>
</head>
<body>

<div class="container" id="mainContainer">
  <div class="language">
    <select id="languageSelect">
      <option value="bn">🇧🇩 Bengali</option>
      <option value="en" selected>🌐 English</option>
      <option value="fr">🇫🇷 French</option>
      <option value="hi">🇮🇳 Hindi</option>
      <option value="ja">🇯🇵 Japanese</option>
      <option value="ko">🇰🇷 Korean</option>
      <option value="ru">🇷🇺 Russian</option>
      <option value="es">🇪🇸 Spanish</option>
    </select>
  </div>

  <label data-i18n="enterAmount" for="amount">Enter Amount (₹):</label>
  <input type="number" id="amount" placeholder="0" />

  <label data-i18n="selectRate" for="rate">Select GST Rate (%):</label>
  <select id="rate">
    <option value="5">5%</option>
    <option value="12">12%</option>
    <option value="18" selected>18%</option>
    <option value="28">28%</option>
  </select>

  <div class="btn-group">
    <button id="resetBtn" data-i18n="resetBtn">🔁 Reset</button>
    <button id="calculateBtn" data-i18n="calculateBtn">📊 Calculate</button>
    <button id="previewBtn" data-i18n="previewBtn">👁️ Preview</button>
  </div>

  <div id="resultSection">
    <h3 data-i18n="resultTitle">GST Calculation Result</h3>
    <p id="cgst"></p>
    <p id="sgst"></p>
    <p id="totalGst"></p>
    <p id="finalAmount"></p>

    <canvas id="gstPieChart"></canvas>
    <canvas id="gstBarChart"></canvas>
  </div>
</div>

<!-- ✅ Preview Section -->
<div id="previewMode">
  <h2 id="previewTitle">📋 GST Preview</h2>
  <div id="previewContent"></div>
  <div class="download-btns">
    <button onclick="downloadImage()">📸 Image</button>
    <button onclick="downloadPDF()">📄 PDF</button>
  </div>
</div>

<script>
  const i18n = {
    en: {
      title: "GST Calculator",
      enterAmount: "Enter Amount (₹):",
      selectRate: "Select GST Rate (%):",
      resetBtn: "🔁 Reset",
      calculateBtn: "📊 Calculate",
      previewBtn: "👁️ Preview",
      resultTitle: "GST Calculation Result",
    },
    hi: {
      title: "जीएसटी कैलकुलेटर",
      enterAmount: "राशि दर्ज करें (₹):",
      selectRate: "जीएसटी दर चुनें (%):",
      resetBtn: "🔁 रीसेट",
      calculateBtn: "📊 कैलकुलेट",
      previewBtn: "👁️ पूर्वावलोकन",
      resultTitle: "जीएसटी परिणाम",
    },
    bn: {
      title: "জিএসটি ক্যালকুলেটর",
      enterAmount: "পরিমাণ লিখুন (₹):",
      selectRate: "জিএসটি হার নির্বাচন করুন (%):",
      resetBtn: "🔁 রিসেট",
      calculateBtn: "📊 হিসাব করুন",
      previewBtn: "👁️ প্রিভিউ",
      resultTitle: "জিএসটি ফলাফল",
    },
    fr: {
      title: "Calculateur de TVA",
      enterAmount: "Entrez le montant (₹):",
      selectRate: "Sélectionnez le taux de TVA (%):",
      resetBtn: "🔁 Réinitialiser",
      calculateBtn: "📊 Calculer",
      previewBtn: "👁️ Aperçu",
      resultTitle: "Résultat de la TVA",
    },
    ru: {
      title: "Калькулятор НДС",
      enterAmount: "Введите сумму (₹):",
      selectRate: "Выберите ставку НДС (%):",
      resetBtn: "🔁 Сброс",
      calculateBtn: "📊 Рассчитать",
      previewBtn: "👁️ Предпросмотр",
      resultTitle: "Результаты НДС",
    },
    es: {
      title: "Calculadora de IVA",
      enterAmount: "Ingrese el monto (₹):",
      selectRate: "Seleccione tasa de IVA (%):",
      resetBtn: "🔁 Reiniciar",
      calculateBtn: "📊 Calcular",
      previewBtn: "👁️ Vista previa",
      resultTitle: "Resultado del IVA",
    },
    ja: {
      title: "消費税計算機",
      enterAmount: "金額を入力 (₹):",
      selectRate: "消費税率を選択 (%):",
      resetBtn: "🔁 リセット",
      calculateBtn: "📊 計算",
      previewBtn: "👁️ プレビュー",
      resultTitle: "消費税の結果",
    },
    ko: {
      title: "부가세 계산기",
      enterAmount: "금액 입력 (₹):",
      selectRate: "부가세율 선택 (%):",
      resetBtn: "🔁 초기화",
      calculateBtn: "📊 계산",
      previewBtn: "👁️ 미리보기",
      resultTitle: "부가세 결과",
    },
  };

  const updateLanguage = () => {
    const lang = document.getElementById("languageSelect").value;
    document.querySelectorAll("[data-i18n]").forEach(el => {
      const key = el.getAttribute("data-i18n");
      if (i18n[lang] && i18n[lang][key]) {
        el.textContent = i18n[lang][key];
      }
    });
  };

  document.getElementById("languageSelect").addEventListener("change", updateLanguage);

  let pieChart, barChart;

  document.getElementById("calculateBtn").onclick = () => {
    const amount = parseFloat(document.getElementById("amount").value);
    const rate = parseFloat(document.getElementById("rate").value);

    if (isNaN(amount)) return alert("Please enter a valid amount!");

    const gstAmount = (amount * rate) / 100;
    const cgst = gstAmount / 2;
    const sgst = gstAmount / 2;
    const total = amount + gstAmount;

    document.getElementById("cgst").textContent = `CGST: ₹${cgst.toFixed(2)}`;
    document.getElementById("sgst").textContent = `SGST: ₹${sgst.toFixed(2)}`;
    document.getElementById("totalGst").textContent = `Total GST: ₹${gstAmount.toFixed(2)}`;
    document.getElementById("finalAmount").textContent = `Final Amount: ₹${total.toFixed(2)}`;

    // Chart data
    const ctx1 = document.getElementById("gstPieChart").getContext("2d");
    const ctx2 = document.getElementById("gstBarChart").getContext("2d");
    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();

    pieChart = new Chart(ctx1, {
      type: 'pie',
      data: {
        labels: ['Base', 'GST'],
        datasets: [{
          data: [amount, gstAmount],
          backgroundColor: ['#42a5f5', '#66bb6a']
        }]
      }
    });

    barChart = new Chart(ctx2, {
      type: 'bar',
      data: {
        labels: ['CGST', 'SGST', 'Final Amount'],
        datasets: [{
          label: 'Amount in ₹',
          data: [cgst, sgst, total],
          backgroundColor: ['#ff7043', '#ab47bc', '#29b6f6']
        }]
      }
    });
  };

  document.getElementById("resetBtn").onclick = () => {
    document.getElementById("amount").value = "";
    document.getElementById("rate").value = "18";
    document.getElementById("cgst").textContent = "";
    document.getElementById("sgst").textContent = "";
    document.getElementById("totalGst").textContent = "";
    document.getElementById("finalAmount").textContent = "";
    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();
  };

  document.getElementById("previewBtn").onclick = () => {
    const content = document.getElementById("previewContent");
    content.innerHTML = `
      <p>${document.getElementById("cgst").textContent}</p>
      <p>${document.getElementById("sgst").textContent}</p>
      <p>${document.getElementById("totalGst").textContent}</p>
      <p>${document.getElementById("finalAmount").textContent}</p>
    `;
    document.getElementById("previewMode").style.display = "block";
    document.getElementById("previewContent").appendChild(document.getElementById("gstPieChart"));
    document.getElementById("previewContent").appendChild(document.getElementById("gstBarChart"));
  };

  window.downloadImage = () => {
    html2canvas(document.getElementById("previewMode")).then(canvas => {
      const link = document.createElement("a");
      link.download = "gst_preview.png";
      link.href = canvas.toDataURL();
      link.click();
    });
  };

  window.downloadPDF = () => {
    html2canvas(document.getElementById("previewMode")).then(canvas => {
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF();
      const img = canvas.toDataURL("image/png");
      pdf.addImage(img, "PNG", 10, 10, 190, 0);
      pdf.save("gst_preview.pdf");
    });
  };

  updateLanguage();
</script>
</body>
</html>
