<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GST Calculator - Pratix Finance</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #e3f2fd, #ffffff);
      margin: 0;
      padding: 0;
      text-align: center;
    }
    header {
      background: #1976d2;
      color: white;
      padding: 1rem;
    }
    header img {
      max-height: 60px;
    }
    .container {
      max-width: 700px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin: 1rem 0 0.5rem;
      font-weight: bold;
      text-align: left;
    }
    input, select, button {
      width: 100%;
      padding: 0.7rem;
      margin-bottom: 1rem;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background: #1976d2;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #1565c0;
    }
    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }
    #resultSection {
      margin-top: 2rem;
      padding: 1rem;
      background: #f1f8e9;
      border-radius: 10px;
      text-align: left;
    }
    canvas {
      max-width: 100%;
      margin-top: 20px;
    }
    #previewMode {
      display: none;
      padding: 1rem;
      margin-top: 1rem;
      background: #fff;
      border-radius: 12px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      position: relative;
    }
    .download-btns {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    .download-btns button {
      background: #4caf50;
    }
    .share-btn {
      background: #f57c00;
      color: white;
      border: none;
    }
    footer {
      margin-top: 2rem;
      background: #f5f5f5;
      padding: 2rem;
      text-align: left;
      font-size: 0.95rem;
    }
    footer a {
      color: #1976d2;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
    .language-selector {
      text-align: left;
      margin-bottom: 1rem;
    }
  </style>
</head>
<body>
<header>
  <img src="logo.png" alt="Logo" />
  <h1>üí∞ GST Calculator</h1>
</header>

<div class="container">
  <!-- Language Selector -->
  <div class="language-selector">
    <label for="languageSelect">üåê Language:</label>
    <select id="languageSelect" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
      <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
      <option value="fr">Fran√ßais</option>
      <option value="ru">–†—É—Å—Å–∫–∏–π</option>
      <option value="es">Espa√±ol</option>
      <option value="ja">Êó•Êú¨Ë™û</option>
      <option value="ko">ÌïúÍµ≠Ïñ¥</option>
    </select>
  </div>

  <!-- Input Fields Begin -->
  <label for="amount" class="i18n" data-key="enterAmount">Enter Amount (‚Çπ):</label>
  <input type="number" id="amount" placeholder="0" />

  <label for="rate" class="i18n" data-key="selectRate">Select GST Rate (%):</label>
  <select id="rate">
    <option value="0">0%</option>
    <option value="5">5%</option>
    <option value="12">12%</option>
    <option value="18" selected>18%</option>
    <option value="28">28%</option>
  </select>

  <label for="taxType" class="i18n" data-key="taxType">GST Type:</label>
  <select id="taxType">
    <option value="exclusive">Exclusive</option>
    <option value="inclusive">Inclusive</option>
  </select>

  <label for="taxMode" class="i18n" data-key="taxMode">GST Mode:</label>
  <select id="taxMode">
    <option value="sgstcgst" selected>SGST + CGST</option>
    <option value="igst">IGST</option>
  </select>
  <!-- Buttons -->
  <div class="btn-group">
    <button onclick="resetFields()" class="i18n" data-key="reset">Reset</button>
    <button onclick="calculateGST()" class="i18n" data-key="calculate">Calculate</button>
    <button onclick="showPreview()" class="i18n" data-key="preview">Preview</button>
  </div>

  <!-- Results -->
  <div id="resultSection"></div>
</div>

<!-- Preview Mode -->
<div id="previewMode">
  <h2>üìä GST Preview</h2>
  <div id="previewContent"></div>
  <canvas id="gstChart" height="200"></canvas>
  <div class="download-btns">
    <button onclick="downloadImage()">Download Image</button>
    <button onclick="downloadPDF()">Download PDF</button>
    <button onclick="sharePreview()" class="share-btn">Share</button>
  </div>
</div>

<footer>
  <p><strong>üìå GST Calculator by Pratix Finance</strong><br>
  This tool calculates GST (Goods and Services Tax) based on inclusive or exclusive rates. It supports IGST and CGST+SGST split and generates visual insights for better understanding.<br><br>
  Contact us at: <a href="mailto:pratixfinance4@gmail.com">pratixfinance4@gmail.com</a>
  </p>
</footer>

<script>
  const translations = {
    en: {
      enterAmount: "Enter Amount (‚Çπ):",
      selectRate: "Select GST Rate (%):",
      taxType: "GST Type:",
      taxMode: "GST Mode:",
      reset: "Reset",
      calculate: "Calculate",
      preview: "Preview",
      sgst: "SGST",
      cgst: "CGST",
      igst: "IGST",
      result: "Result",
      totalAmount: "Total Amount",
      taxAmount: "Tax Amount",
      baseAmount: "Base Amount"
    },
    hi: {
      enterAmount: "‡§∞‡§æ‡§∂‡§ø ‡§¶‡§∞‡•ç‡§ú ‡§ï‡§∞‡•á‡§Ç (‚Çπ):",
      selectRate: "‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä ‡§¶‡§∞ ‡§ö‡•Å‡§®‡•á‡§Ç (%):",
      taxType: "‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä ‡§™‡•ç‡§∞‡§ï‡§æ‡§∞:",
      taxMode: "‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä ‡§Æ‡•ã‡§°:",
      reset: "‡§∞‡•Ä‡§∏‡•á‡§ü",
      calculate: "‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç",
      preview: "‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®",
      sgst: "‡§è‡§∏‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä",
      cgst: "‡§∏‡•Ä‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä",
      igst: "‡§Ü‡§à‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä",
      result: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ",
      totalAmount: "‡§ï‡•Å‡§≤ ‡§∞‡§æ‡§∂‡§ø",
      taxAmount: "‡§ï‡§∞ ‡§∞‡§æ‡§∂‡§ø",
      baseAmount: "‡§¨‡•á‡§∏ ‡§∞‡§æ‡§∂‡§ø"
    },
    bn: {
      enterAmount: "‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶® (‚Çπ):",
      selectRate: "‡¶ú‡¶ø‡¶è‡¶∏‡¶ü‡¶ø ‡¶π‡¶æ‡¶∞ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (%):",
      taxType: "‡¶ú‡¶ø‡¶è‡¶∏‡¶ü‡¶ø ‡¶™‡ßç‡¶∞‡¶ï‡¶æ‡¶∞:",
      taxMode: "‡¶ú‡¶ø‡¶è‡¶∏‡¶ü‡¶ø ‡¶Æ‡ßã‡¶°:",
      reset: "‡¶∞‡¶ø‡¶∏‡ßá‡¶ü",
      calculate: "‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",
      preview: "‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â",
      sgst: "‡¶è‡¶∏‡¶ú‡¶ø‡¶è‡¶∏‡¶ü‡¶ø",
      cgst: "‡¶∏‡¶ø‡¶ú‡¶ø‡¶è‡¶∏‡¶ü‡¶ø",
      igst: "‡¶Ü‡¶á‡¶ú‡¶ø‡¶è‡¶∏‡¶ü‡¶ø",
      result: "‡¶´‡¶≤‡¶æ‡¶´‡¶≤",
      totalAmount: "‡¶Æ‡ßã‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£",
      taxAmount: "‡¶ï‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£",
      baseAmount: "‡¶Æ‡ßÇ‡¶≤ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£"
    },
    fr: {
      enterAmount: "Entrez le montant (‚Çπ):",
      selectRate: "S√©lectionnez le taux de TVA (%):",
      taxType: "Type de TVA:",
      taxMode: "Mode de TVA:",
      reset: "R√©initialiser",
      calculate: "Calculer",
      preview: "Aper√ßu",
      sgst: "SGST",
      cgst: "CGST",
      igst: "IGST",
      result: "R√©sultat",
      totalAmount: "Montant total",
      taxAmount: "Montant de la taxe",
      baseAmount: "Montant de base"
    },
    ru: {
      enterAmount: "–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É (‚Çπ):",
      selectRate: "–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞–≤–∫—É –ù–î–° (%):",
      taxType: "–¢–∏–ø –ù–î–°:",
      taxMode: "–†–µ–∂–∏–º –ù–î–°:",
      reset: "–°–±—Ä–æ—Å–∏—Ç—å",
      calculate: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å",
      preview: "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä",
      sgst: "–°–ì–°–¢",
      cgst: "–¶–ì–°–¢",
      igst: "–ò–ì–°–¢",
      result: "–†–µ–∑—É–ª—å—Ç–∞—Ç",
      totalAmount: "–û–±—â–∞—è —Å—É–º–º–∞",
      taxAmount: "–°—É–º–º–∞ –Ω–∞–ª–æ–≥–∞",
      baseAmount: "–ë–∞–∑–æ–≤–∞—è —Å—É–º–º–∞"
    },
    es: {
      enterAmount: "Ingrese la cantidad (‚Çπ):",
      selectRate: "Seleccione la tasa de GST (%):",
      taxType: "Tipo de GST:",
      taxMode: "Modo de GST:",
      reset: "Restablecer",
      calculate: "Calcular",
      preview: "Vista previa",
      sgst: "SGST",
      cgst: "CGST",
      igst: "IGST",
      result: "Resultado",
      totalAmount: "Monto total",
      taxAmount: "Monto del impuesto",
      baseAmount: "Monto base"
    },
    ja: {
      enterAmount: "ÈáëÈ°ç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ (‚Çπ):",
      selectRate: "GSTÁéá„ÇíÈÅ∏Êäû (%):",
      taxType: "GST„Çø„Ç§„Éó:",
      taxMode: "GST„É¢„Éº„Éâ:",
      reset: "„É™„Çª„ÉÉ„Éà",
      calculate: "Ë®àÁÆó",
      preview: "„Éó„É¨„Éì„É•„Éº",
      sgst: "SGST",
      cgst: "CGST",
      igst: "IGST",
      result: "ÁµêÊûú",
      totalAmount: "ÂêàË®àÈáëÈ°ç",
      taxAmount: "Á®éÈ°ç",
      baseAmount: "Âü∫Êú¨ÈáëÈ°ç"
    },
    ko: {
      enterAmount: "Í∏àÏï° ÏûÖÎ†• (‚Çπ):",
      selectRate: "GST ÏÑ∏Ïú® ÏÑ†ÌÉù (%):",
      taxType: "GST Ïú†Ìòï:",
      taxMode: "GST Î™®Îìú:",
      reset: "Ïû¨ÏÑ§Ï†ï",
      calculate: "Í≥ÑÏÇ∞",
      preview: "ÎØ∏Î¶¨Î≥¥Í∏∞",
      sgst: "SGST",
      cgst: "CGST",
      igst: "IGST",
      result: "Í≤∞Í≥º",
      totalAmount: "Ï¥ù Í∏àÏï°",
      taxAmount: "ÏÑ∏Í∏à Í∏àÏï°",
      baseAmount: "Í∏∞Î≥∏ Í∏àÏï°"
    }
  };

  function changeLanguage() {
    const lang = document.getElementById("languageSelect").value;
    document.querySelectorAll(".i18n").forEach(el => {
      const key = el.dataset.key;
      if (translations[lang] && translations[lang][key]) {
        el.textContent = translations[lang][key];
      }
    });
  }

  let chart;

  function calculateGST() {
    const amount = parseFloat(document.getElementById("amount").value);
    const rate = parseFloat(document.getElementById("rate").value);
    const taxType = document.getElementById("taxType").value;
    const taxMode = document.getElementById("taxMode").value;

    if (!amount || amount <= 0) return alert("Please enter a valid amount");

    let baseAmount, gstAmount, total;
    if (taxType === "inclusive") {
      baseAmount = amount / (1 + rate / 100);
      gstAmount = amount - baseAmount;
      total = amount;
    } else {
      baseAmount = amount;
      gstAmount = (amount * rate) / 100;
      total = amount + gstAmount;
    }

    let sgst = 0, cgst = 0, igst = 0;
    if (taxMode === "igst") {
      igst = gstAmount;
    } else {
      sgst = gstAmount / 2;
      cgst = gstAmount / 2;
    }

    document.getElementById("resultSection").innerHTML = `
      <h3>üßæ ${translations.en.result}</h3>
      <p><strong>${translations.en.baseAmount}:</strong> ‚Çπ${baseAmount.toFixed(2)}</p>
      <p><strong>${taxMode === "igst" ? translations.en.igst : translations.en.cgst + " & " + translations.en.sgst}:</strong> ‚Çπ${gstAmount.toFixed(2)}</p>
      <p><strong>${translations.en.totalAmount}:</strong> ‚Çπ${total.toFixed(2)}</p>
    `;

    // Save for preview
    document.getElementById("previewContent").innerHTML = `
      <p><strong>Amount:</strong> ‚Çπ${amount.toFixed(2)}</p>
      <p><strong>Rate:</strong> ${rate}%</p>
      <p><strong>Type:</strong> ${taxType}</p>
      <p><strong>Mode:</strong> ${taxMode}</p>
      <p><strong>GST:</strong> ‚Çπ${gstAmount.toFixed(2)}</p>
      <p><strong>Total:</strong> ‚Çπ${total.toFixed(2)}</p>
    `;

    renderChart({ sgst, cgst, igst });
  }

  function resetFields() {
    document.getElementById("amount").value = "";
    document.getElementById("rate").value = "18";
    document.getElementById("taxType").value = "exclusive";
    document.getElementById("taxMode").value = "sgstcgst";
    document.getElementById("resultSection").innerHTML = "";
    document.getElementById("previewMode").style.display = "none";
  }

  function showPreview() {
    document.getElementById("previewMode").style.display = "block";
  }

  function renderChart(data) {
    const ctx = document.getElementById("gstChart").getContext("2d");
    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["SGST", "CGST", "IGST"],
        datasets: [{
          data: [data.sgst, data.cgst, data.igst],
          backgroundColor: ["#4caf50", "#ff9800", "#2196f3"]
        }]
      },
      options: {
        responsive: true
      }
    });
  }
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  function downloadImage() {
    const preview = document.getElementById("previewMode");
    document.querySelectorAll('.download-btns button').forEach(btn => btn.style.display = 'none');

    html2canvas(preview).then(canvas => {
      const link = document.createElement("a");
      link.download = "GST_Preview.png";
      link.href = canvas.toDataURL();
      link.click();

      // Restore buttons
      document.querySelectorAll('.download-btns button').forEach(btn => btn.style.display = 'inline-block');
    });
  }

  async function downloadPDF() {
    const preview = document.getElementById("previewMode");
    document.querySelectorAll('.download-btns button').forEach(btn => btn.style.display = 'none');

    const canvas = await html2canvas(preview, { scale: 2 });
    const imgData = canvas.toDataURL("image/png");

    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF("p", "mm", "a4");
    const pdfWidth = pdf.internal.pageSize.getWidth();
    const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

    pdf.addImage(imgData, "PNG", 0, 0, pdfWidth, pdfHeight);
    pdf.save("GST_Preview.pdf");

    // Restore buttons
    document.querySelectorAll('.download-btns button').forEach(btn => btn.style.display = 'inline-block');
  }

  function sharePreview() {
    const preview = document.getElementById("previewMode");

    html2canvas(preview).then(canvas => {
      canvas.toBlob(blob => {
        const file = new File([blob], "gst_preview.png", { type: "image/png" });
        if (navigator.share) {
          navigator.share({
            title: "GST Calculation Result",
            text: "Check out my GST breakdown from Pratix Finance!",
            files: [file]
          }).catch(err => console.log("Share failed:", err));
        } else {
          alert("Sharing is not supported on this browser.");
        }
      });
    });
  }
</script>

<style>
  #previewMode {
    display: none;
    background: #fff;
    padding: 20px;
    border-radius: 12px;
    margin-top: 20px;
    text-align: left;
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
  }
  #previewMode h2 {
    margin-top: 0;
    color: #333;
  }
  .download-btns button {
    margin: 10px 8px 0 0;
    padding: 10px 16px;
    background: #333;
    color: #fff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  .download-btns button:hover {
    background: #000;
  }
</style>
</body>
</html>