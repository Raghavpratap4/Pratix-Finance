<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>GST Calculator</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2canvas"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #e3f2fd, #ffffff);
      margin: 0; padding: 0;
      text-align: center;
    }
    header {
      background: #1976d2;
      color: white;
      padding: 1rem;
    }
    header img {
      max-width: 150px;
      margin-bottom: 10px;
    }
    .container {
      max-width: 600px;
      margin: 2rem auto;
      background: white;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin: 1rem 0 0.5rem;
      font-weight: bold;
      text-align: left;
    }
    input, select, button {
      width: 100%;
      padding: 0.7rem;
      margin-bottom: 1rem;
      font-size: 1rem;
      border-radius: 8px;
      border: 1px solid #ccc;
    }
    button {
      background: #1976d2;
      color: white;
      border: none;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #1565c0;
    }
    .btn-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .result-section {
      margin-top: 2rem;
      padding: 1rem;
      background: #f1f8e9;
      border-radius: 10px;
      text-align: left;
    }
    canvas {
      max-width: 100%;
      margin-top: 20px;
    }
    #previewMode {
      display: none;
      padding: 1rem;
      margin-top: 1rem;
      background: #fff;
      border-radius: 12px;
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
    }
    .download-btns {
      display: flex;
      gap: 10px;
      justify-content: center;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    .download-btns button {
      width: auto;
    }
    footer {
      margin-top: 2rem;
      background: #f5f5f5;
      padding: 2rem;
      text-align: left;
      font-size: 0.95rem;
    }
    .lang-selector {
      float: right;
      margin-top: -60px;
      margin-right: 10px;
    }
    @media(max-width: 600px) {
      .lang-selector {
        float: none;
        margin: 1rem auto;
        display: block;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Pratix Finance Logo" />
    <h1>üí∞ GST Calculator</h1>
    <div class="lang-selector">
      <select id="languageSelect">
        <option value="en" selected>üåê English</option>
        <option value="hi">üáÆüá≥ Hindi</option>
        <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç Tamil</option>
        <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ Bengali</option>
        <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å Telugu</option>
      </select>
    </div>
  </header>
  <div class="container">
    <label for="amount">Enter Amount (‚Çπ):</label>
    <input type="number" id="amount" placeholder="0" />
    <label for="rate">Select GST Rate (%):</label>
    <select id="rate">
      <option value="0">0%</option>
      <option value="5">5%</option>
      <option value="12">12%</option>
      <option value="18" selected>18%</option>
      <option value="28">28%</option>
    </select>
    <label for="type">GST Type:</label>
    <select id="type">
      <option value="inclusive">Inclusive</option>
      <option value="exclusive" selected>Exclusive</option>
    </select>
    <label for="mode">Tax Mode:</label>
    <select id="mode">
      <option value="igst">IGST</option>
      <option value="cgst_sgst" selected>CGST + SGST</option>
    </select>
    <div class="btn-group">
      <button onclick="resetForm()">üîÑ Reset</button>
      <button onclick="calculateGST()">üìä Calculate</button>
      <button onclick="showPreview()">üëÅÔ∏è Preview</button>
    </div>

    <div class="result-section" id="resultSection" style="display:none;">
      <h3>Results:</h3>
      <p id="gstBreakup"></p>
      <p id="totalAmount"></p>
      <canvas id="pieChart"></canvas>
      <canvas id="barChart"></canvas>
    </div>
  </div>

  <!-- Preview Area -->
  <div id="previewMode">
    <img src="logo.png" style="max-width:150px" alt="Logo"/>
    <h2>GST Calculation Preview</h2>
    <div id="previewInputs"></div>
    <div id="previewResults"></div>
    <canvas id="previewPieChart"></canvas>
    <canvas id="previewBarChart"></canvas>
    <div class="download-btns">
      <button onclick="downloadAsImage()">üì∏ Download Image</button>
      <button onclick="downloadAsPDF()">üìÑ Download PDF</button>
      <button onclick="navigator.share ? shareResult() : alert('Sharing not supported')">üîó Share</button>
    </div>
  </div>

  <footer>
    <strong>About this GST Calculator:</strong>
    <p>This GST calculator helps you calculate Goods and Services Tax (GST) based on various rates and modes. You can choose between IGST and CGST/SGST, and whether the price is inclusive or exclusive of tax. It shows a full breakdown of tax amounts and includes dynamic charts for visualization.</p>
    <p>Use this tool to quickly understand your GST liability and get downloadable summaries for records or reporting. Built by <strong>Raghav Pratap</strong> | Contact: pratixfinance@gmail.com</p>
  </footer>
<script>
  const lang = {
    en: {
      result: "Results:",
      downloadImg: "Download Image",
      downloadPDF: "Download PDF",
      share: "Share",
      preview: "Preview",
      reset: "Reset",
      calc: "Calculate"
    },
    hi: {
      result: "‡§™‡§∞‡§ø‡§£‡§æ‡§Æ:",
      downloadImg: "‡§õ‡§µ‡§ø ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
      downloadPDF: "‡§™‡•Ä‡§°‡•Ä‡§è‡§´ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç",
      share: "‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç",
      preview: "‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®",
      reset: "‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç",
      calc: "‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç"
    },
    ta: {
      result: "‡ÆÆ‡ØÅ‡Æü‡Æø‡Æµ‡ØÅ‡Æï‡Æ≥‡Øç:",
      downloadImg: "‡Æ™‡Æü‡Æ§‡Øç‡Æ§‡Øà ‡Æ™‡Æ§‡Æø‡Æµ‡Æø‡Æ±‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
      downloadPDF: "PDF ‡Æ™‡Æ§‡Æø‡Æµ‡Æø‡Æ±‡Æï‡Øç‡Æï‡Æµ‡ØÅ‡ÆÆ‡Øç",
      share: "‡Æ™‡Æï‡Æø‡Æ∞‡Æµ‡ØÅ‡ÆÆ‡Øç",
      preview: "‡ÆÆ‡ØÅ‡Æ©‡Øç‡Æ™‡Ææ‡Æ∞‡Øç‡Æµ‡Øà",
      reset: "‡ÆÆ‡ØÄ‡Æü‡Øç‡Æü‡ÆÆ‡Øà",
      calc: "‡Æï‡Æ£‡Æï‡Øç‡Æï‡Æø‡Æü‡ØÅ"
    },
    bn: {
      result: "‡¶´‡¶≤‡¶æ‡¶´‡¶≤:",
      downloadImg: "‡¶õ‡¶¨‡¶ø ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®",
      downloadPDF: "PDF ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®",
      share: "‡¶∂‡ßá‡ßü‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®",
      preview: "‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â",
      reset: "‡¶∞‡¶ø‡¶∏‡ßá‡¶ü",
      calc: "‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®"
    },
    te: {
      result: "‡∞´‡∞≤‡∞ø‡∞§‡∞æ‡∞≤‡±Å:",
      downloadImg: "‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞æ‡∞®‡±ç‡∞®‡∞ø ‡∞°‡±å‡∞®‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
      downloadPDF: "PDF ‡∞°‡±å‡∞®‡±ç‚Äå‡∞≤‡±ã‡∞°‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
      share: "‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
      preview: "‡∞™‡±ç‡∞∞‡∞ø‡∞µ‡±ç‡∞Ø‡±Ç",
      reset: "‡∞∞‡±Ä‡∞∏‡±Ü‡∞ü‡±ç",
      calc: "‡∞≤‡±Ü‡∞ï‡±ç‡∞ï‡∞ø‡∞Ç‡∞ö‡±Å"
    }
  };

  document.getElementById("languageSelect").addEventListener("change", changeLanguage);

  function changeLanguage() {
    const langCode = document.getElementById("languageSelect").value;
    document.querySelector(".btn-group button:nth-child(1)").innerText = "üîÑ " + lang[langCode].reset;
    document.querySelector(".btn-group button:nth-child(2)").innerText = "üìä " + lang[langCode].calc;
    document.querySelector(".btn-group button:nth-child(3)").innerText = "üëÅÔ∏è " + lang[langCode].preview;
    document.querySelector("#resultSection h3").innerText = lang[langCode].result;
    document.querySelector(".download-btns button:nth-child(1)").innerText = "üì∏ " + lang[langCode].downloadImg;
    document.querySelector(".download-btns button:nth-child(2)").innerText = "üìÑ " + lang[langCode].downloadPDF;
    document.querySelector(".download-btns button:nth-child(3)").innerText = "üîó " + lang[langCode].share;
  }

  function resetForm() {
    document.getElementById("amount").value = '';
    document.getElementById("rate").value = '18';
    document.getElementById("type").value = 'exclusive';
    document.getElementById("mode").value = 'cgst_sgst';
    document.getElementById("resultSection").style.display = 'none';
    document.getElementById("previewMode").style.display = 'none';
  }

  function calculateGST() {
    const amount = parseFloat(document.getElementById("amount").value);
    const rate = parseFloat(document.getElementById("rate").value);
    const type = document.getElementById("type").value;
    const mode = document.getElementById("mode").value;

    if (isNaN(amount)) return alert("Please enter a valid amount.");

    let taxAmount, totalAmount, cgst, sgst, igst;
    if (type === "exclusive") {
      taxAmount = amount * (rate / 100);
      totalAmount = amount + taxAmount;
    } else {
      taxAmount = amount - (amount * (100 / (100 + rate)));
      totalAmount = amount;
    }

    if (mode === "igst") {
      igst = taxAmount;
      cgst = sgst = 0;
    } else {
      cgst = sgst = taxAmount / 2;
      igst = 0;
    }

    document.getElementById("gstBreakup").innerHTML = `
      <strong>GST Breakdown:</strong><br/>
      ${igst > 0 ? `IGST: ‚Çπ${igst.toFixed(2)}` : `CGST: ‚Çπ${cgst.toFixed(2)}, SGST: ‚Çπ${sgst.toFixed(2)}`}
    `;
    document.getElementById("totalAmount").innerHTML = `<strong>Total Amount: ‚Çπ${totalAmount.toFixed(2)}</strong>`;
    document.getElementById("resultSection").style.display = 'block';

    drawCharts("pieChart", amount, taxAmount);
    drawBarChart("barChart", amount, taxAmount);
  }

  function drawCharts(canvasId, base, tax) {
    const ctx = document.getElementById(canvasId).getContext("2d");
    new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["Base Price", "GST"],
        datasets: [{
          data: [base, tax],
          backgroundColor: ["#42a5f5", "#66bb6a"]
        }]
      }
    });
  }

  function drawBarChart(canvasId, base, tax) {
    const ctx = document.getElementById(canvasId).getContext("2d");
    new Chart(ctx, {
      type: "bar",
      data: {
        labels: ["Base Price", "GST"],
        datasets: [{
          label: "Amount (‚Çπ)",
          data: [base, tax],
          backgroundColor: ["#42a5f5", "#66bb6a"]
        }]
      },
      options: {
        responsive: true,
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  }

  function showPreview() {
    calculateGST();
    const amount = document.getElementById("amount").value;
    const rate = document.getElementById("rate").value;
    const type = document.getElementById("type").value;
    const mode = document.getElementById("mode").value;

    document.getElementById("previewInputs").innerHTML = `
      <p><strong>Amount:</strong> ‚Çπ${amount}</p>
      <p><strong>Rate:</strong> ${rate}%</p>
      <p><strong>Type:</strong> ${type}</p>
      <p><strong>Mode:</strong> ${mode}</p>
    `;
    document.getElementById("previewResults").innerHTML = document.getElementById("gstBreakup").innerHTML + "<br>" + document.getElementById("totalAmount").innerHTML;

    drawCharts("previewPieChart", parseFloat(amount), parseFloat(rate) * amount / 100);
    drawBarChart("previewBarChart", parseFloat(amount), parseFloat(rate) * amount / 100);

    document.getElementById("previewMode").style.display = 'block';
  }

  function downloadAsImage() {
    html2canvas(document.getElementById("previewMode")).then(canvas => {
      const link = document.createElement("a");
      link.href = canvas.toDataURL("image/png");
      link.download = "gst-preview.png";
      link.click();
    });
  }

  function downloadAsPDF() {
    html2canvas(document.getElementById("previewMode")).then(canvas => {
      const imgData = canvas.toDataURL("image/png");
      const { jsPDF } = window.jspdf;
      const pdf = new jsPDF();
      pdf.addImage(imgData, "PNG", 10, 10, 190, 0);
      pdf.save("gst-preview.pdf");
    });
  }

  function shareResult() {
    navigator.share({
      title: "GST Result",
      text: "Check out my GST Calculation",
      url: window.location.href
    });
  }
</script>
</body>
</html>
