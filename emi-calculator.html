<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EMI Calculator - Pratix Finance</title>
  <link rel="icon" href="logo.png" type="image/png" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #d2f4ff, #f8f1ff);
      margin: 0;
      padding: 0;
      color: #333;
      text-align: center;
    }
    header {
      background: #4f46e5;
      color: white;
      padding: 1rem 0;
      font-size: 1.5rem;
      font-weight: bold;
    }
    .container {
      max-width: 600px;
      margin: 2rem auto;
      padding: 1rem;
      background: white;
      border-radius: 1rem;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    label {
      display: block;
      margin: 1rem 0 0.3rem;
      font-weight: 500;
    }
    input, select {
      width: 100%;
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 0.5rem;
      border: 1px solid #ccc;
    }
    button {
      margin-top: 1rem;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border: none;
      border-radius: 0.5rem;
      background: #4f46e5;
      color: white;
      cursor: pointer;
    }
    button:hover {
      background: #3730a3;
    }
    .output {
      margin-top: 1.5rem;
      padding: 1rem;
      border-radius: 0.5rem;
      background: #f1f5f9;
    }
    .chart-container {
      margin-top: 2rem;
    }
    canvas {
      max-width: 100%;
    }
    .footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #555;
    }
    .language-select {
      margin-top: 1rem;
    }
    #previewArea {
      display: none;
      text-align: center;
      margin-top: 2rem;
      padding: 1rem;
      border: 2px dashed #aaa;
      background: #fff;
    }
    #downloadBtn, #pdfBtn, #shareBtn {
      display: inline-block;
      margin: 0.5rem;
    }
  </style>
</head>
<body>
  <header>
    <img src="logo.png" alt="Logo" style="height:40px; vertical-align:middle; margin-right:10px;">
    Pratix Finance - EMI Calculator
  </header>
  <div class="container">
    <div class="language-select">
      <label for="language">üåê Select Language:</label>
      <select id="language" onchange="changeLanguage()">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
        <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
        <option value="fr">Fran√ßais</option>
        <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        <option value="es">Espa√±ol</option>
        <option value="ja">Êó•Êú¨Ë™û</option>
        <option value="ko">ÌïúÍµ≠Ïñ¥</option>
      </select>
    </div>
    <label id="loanAmountLabel">üí∞ Loan Amount</label>
    <input type="number" id="loanAmount" placeholder="Enter loan amount" />

    <label id="interestRateLabel">üìà Annual Interest Rate (%)</label>
    <input type="number" id="interestRate" placeholder="Enter interest rate" />

    <label id="loanTenureLabel">üìÖ Loan Tenure (in months)</label>
    <input type="number" id="loanTenure" placeholder="Enter tenure in months" />

    <div>
      <button onclick="calculateEMI()" id="calculateBtn">Calculate</button>
      <button onclick="resetForm()" id="resetBtn">Reset</button>
      <button onclick="showPreview()" id="previewBtn">Preview</button>
    </div>

    <div class="output" id="outputSection">
      <h3 id="resultTitle">üìä EMI Result</h3>
      <p id="emiResult"></p>
      <p id="totalPaymentResult"></p>
      <p id="totalInterestResult"></p>
    </div>

    <div class="chart-container">
      <canvas id="emiPieChart"></canvas>
      <canvas id="emiBarChart"></canvas>
    </div>

    <div id="previewArea">
      <h2>üìÑ EMI Summary Preview</h2>
      <div id="previewContent">
        <!-- Injected summary, chart, logo here -->
      </div>
      <div>
        <button id="downloadBtn" onclick="downloadImage()">Download Image</button>
        <button id="pdfBtn" onclick="downloadPDF()">Download PDF</button>
        <button id="shareBtn" onclick="sharePreview()">Share</button>
      </div>
    </div>

    <div class="footer">
      Contact us at <a href="mailto:pratixfinance4@gmail.com">pratixfinance4@gmail.com</a><br />
      EMI Calculator by Raghav Pratap
    </div>
  </div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  let pieChart, barChart;

  function calculateEMI() {
    const P = parseFloat(document.getElementById("loanAmount").value);
    const annualRate = parseFloat(document.getElementById("interestRate").value);
    const N = parseInt(document.getElementById("loanTenure").value);

    const r = annualRate / 12 / 100;

    if (isNaN(P) || isNaN(r) || isNaN(N) || P <= 0 || r <= 0 || N <= 0) {
      alert("Please fill in valid values.");
      return;
    }

    const EMI = (P * r * Math.pow(1 + r, N)) / (Math.pow(1 + r, N) - 1);
    const totalPayment = EMI * N;
    const totalInterest = totalPayment - P;

    document.getElementById("emiResult").innerText = `üìå Monthly EMI: ‚Çπ${EMI.toFixed(2)}`;
    document.getElementById("totalPaymentResult").innerText = `üí≥ Total Payment: ‚Çπ${totalPayment.toFixed(2)}`;
    document.getElementById("totalInterestResult").innerText = `üìà Total Interest: ‚Çπ${totalInterest.toFixed(2)}`;

    renderCharts(P, totalInterest);
  }

  function renderCharts(principal, interest) {
    const pieCtx = document.getElementById("emiPieChart").getContext("2d");
    const barCtx = document.getElementById("emiBarChart").getContext("2d");

    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();

    pieChart = new Chart(pieCtx, {
      type: "pie",
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{
          data: [principal, interest],
          backgroundColor: ["#4f46e5", "#facc15"]
        }]
      }
    });

    barChart = new Chart(barCtx, {
      type: "bar",
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{
          label: "Amount ‚Çπ",
          data: [principal, interest],
          backgroundColor: ["#4f46e5", "#facc15"]
        }]
      },
      options: {
        scales: {
          y: {
            beginAtZero: true
          }
        }
      }
    });
  }

  function resetForm() {
    document.getElementById("loanAmount").value = '';
    document.getElementById("interestRate").value = '';
    document.getElementById("loanTenure").value = '';
    document.getElementById("emiResult").innerText = '';
    document.getElementById("totalPaymentResult").innerText = '';
    document.getElementById("totalInterestResult").innerText = '';
    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();
    document.getElementById("previewArea").style.display = "none";
  }

  function showPreview() {
    const logo = '<img src="logo.png" style="height:40px;"><br>';
    const title = '<h3>Pratix Finance - EMI Summary</h3>';
    const result = document.getElementById("outputSection").innerHTML;
    const chart1 = document.getElementById("emiPieChart").outerHTML;
    const chart2 = document.getElementById("emiBarChart").outerHTML;

    const previewContent = document.getElementById("previewContent");
    previewContent.innerHTML = logo + title + result;

    const pieClone = document.getElementById("emiPieChart").cloneNode(true);
    const barClone = document.getElementById("emiBarChart").cloneNode(true);

    previewContent.appendChild(pieClone);
    previewContent.appendChild(barClone);

    document.getElementById("previewArea").style.display = "block";
  }

  async function downloadImage() {
    const element = document.getElementById("previewContent");
    const canvas = await html2canvas(element);
    const link = document.createElement('a');
    link.download = 'emi-calculation.png';
    link.href = canvas.toDataURL("image/png");
    link.click();
  }

  async function downloadPDF() {
    const { jsPDF } = window.jspdf;
    const element = document.getElementById("previewContent");
    const canvas = await html2canvas(element);
    const imgData = canvas.toDataURL("image/png");

    const pdf = new jsPDF();
    const width = pdf.internal.pageSize.getWidth();
    const height = canvas.height * width / canvas.width;

    pdf.addImage(imgData, 'PNG', 0, 10, width, height);
    pdf.save('emi-calculation.pdf');
  }

  async function sharePreview() {
    const element = document.getElementById("previewContent");
    const canvas = await html2canvas(element);
    canvas.toBlob(async function(blob) {
      const file = new File([blob], "emi-calculation.png", { type: "image/png" });

      if (navigator.canShare && navigator.canShare({ files: [file] })) {
        await navigator.share({
          title: "EMI Calculation",
          files: [file]
        });
      } else {
        alert("Sharing not supported. You can download and share manually.");
      }
    });
  }

  const translations = {
    en: {
      loanAmountLabel: "üí∞ Loan Amount",
      interestRateLabel: "üìà Annual Interest Rate (%)",
      loanTenureLabel: "üìÖ Loan Tenure (in months)",
      calculateBtn: "Calculate",
      resetBtn: "Reset",
      previewBtn: "Preview",
      resultTitle: "üìä EMI Result"
    },
    hi: {
      loanAmountLabel: "üí∞ ‡§ã‡§£ ‡§∞‡§æ‡§∂‡§ø",
      interestRateLabel: "üìà ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§¨‡•ç‡§Ø‡§æ‡§ú ‡§¶‡§∞ (%)",
      loanTenureLabel: "üìÖ ‡§ã‡§£ ‡§Ö‡§µ‡§ß‡§ø (‡§Æ‡§π‡•Ä‡§®‡•ã‡§Ç ‡§Æ‡•á‡§Ç)",
      calculateBtn: "‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç",
      resetBtn: "‡§∞‡•Ä‡§∏‡•á‡§ü",
      previewBtn: "‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§µ‡§≤‡•ã‡§ï‡§®",
      resultTitle: "üìä ‡§à‡§è‡§Æ‡§Ü‡§à ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ"
    },
    bn: {
      loanAmountLabel: "üí∞ ‡¶ã‡¶£‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£",
      interestRateLabel: "üìà ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï ‡¶∏‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶π‡¶æ‡¶∞ (%)",
      loanTenureLabel: "üìÖ ‡¶ã‡¶£‡ßá‡¶∞ ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ (‡¶Æ‡¶æ‡¶∏‡ßá)",
      calculateBtn: "‡¶ó‡¶£‡¶®‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®",
      resetBtn: "‡¶∞‡¶ø‡¶∏‡ßá‡¶ü",
      previewBtn: "‡¶™‡ßç‡¶∞‡¶ø‡¶≠‡¶ø‡¶â",
      resultTitle: "üìä ‡¶á‡¶è‡¶Æ‡¶Ü‡¶á ‡¶´‡¶≤‡¶æ‡¶´‡¶≤"
    },
    fr: {
      loanAmountLabel: "üí∞ Montant du pr√™t",
      interestRateLabel: "üìà Taux d'int√©r√™t annuel (%)",
      loanTenureLabel: "üìÖ Dur√©e du pr√™t (en mois)",
      calculateBtn: "Calculer",
      resetBtn: "R√©initialiser",
      previewBtn: "Aper√ßu",
      resultTitle: "üìä R√©sultat EMI"
    },
    ru: {
      loanAmountLabel: "üí∞ –°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞",
      interestRateLabel: "üìà –ì–æ–¥–æ–≤–∞—è –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (%)",
      loanTenureLabel: "üìÖ –°—Ä–æ–∫ –∫—Ä–µ–¥–∏—Ç–∞ (–≤ –º–µ—Å—è—Ü–∞—Ö)",
      calculateBtn: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å",
      resetBtn: "–°–±—Ä–æ—Å–∏—Ç—å",
      previewBtn: "–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä",
      resultTitle: "üìä –†–µ–∑—É–ª—å—Ç–∞—Ç EMI"
    },
    es: {
      loanAmountLabel: "üí∞ Monto del pr√©stamo",
      interestRateLabel: "üìà Tasa de inter√©s anual (%)",
      loanTenureLabel: "üìÖ Plazo del pr√©stamo (en meses)",
      calculateBtn: "Calcular",
      resetBtn: "Restablecer",
      previewBtn: "Vista previa",
      resultTitle: "üìä Resultado EMI"
    },
    ja: {
      loanAmountLabel: "üí∞ „É≠„Éº„É≥ÈáëÈ°ç",
      interestRateLabel: "üìà Âπ¥Âà©Áéá (%)",
      loanTenureLabel: "üìÖ „É≠„Éº„É≥ÊúüÈñìÔºàÊúàÔºâ",
      calculateBtn: "Ë®àÁÆó„Åô„Çã",
      resetBtn: "„É™„Çª„ÉÉ„Éà",
      previewBtn: "„Éó„É¨„Éì„É•„Éº",
      resultTitle: "üìä EMIÁµêÊûú"
    },
    ko: {
      loanAmountLabel: "üí∞ ÎåÄÏ∂ú Í∏àÏï°",
      interestRateLabel: "üìà Ïó∞Ïù¥Ïú® (%)",
      loanTenureLabel: "üìÖ ÎåÄÏ∂ú Í∏∞Í∞Ñ (Í∞úÏõî)",
      calculateBtn: "Í≥ÑÏÇ∞",
      resetBtn: "Ïû¨ÏÑ§Ï†ï",
      previewBtn: "ÎØ∏Î¶¨Î≥¥Í∏∞",
      resultTitle: "üìä EMI Í≤∞Í≥º"
    }
  };

  function changeLanguage() {
    const lang = document.getElementById("language").value;
    const t = translations[lang];

    document.getElementById("loanAmountLabel").innerText = t.loanAmountLabel;
    document.getElementById("interestRateLabel").innerText = t.interestRateLabel;
    document.getElementById("loanTenureLabel").innerText = t.loanTenureLabel;
    document.getElementById("calculateBtn").innerText = t.calculateBtn;
    document.getElementById("resetBtn").innerText = t.resetBtn;
    document.getElementById("previewBtn").innerText = t.previewBtn;
    document.getElementById("resultTitle").innerText = t.resultTitle;
  }
</script>
</body>
</html>
