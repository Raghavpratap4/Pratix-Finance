<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EMI Calculator - Pratix Finance</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      margin: 0;
      padding: 0;
      background: linear-gradient(to right, #e0f7fa, #ffffff);
      color: #333;
    }

    .container {
      max-width: 600px;
      margin: auto;
      padding: 1rem;
    }

    .logo {
      text-align: center;
      margin: 1rem 0;
    }

    .logo img {
      height: 50px;
    }

    h2 {
      text-align: center;
      color: #1e40af;
    }

    label {
      display: block;
      margin-top: 1rem;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 10px;
      border: 2px solid #ccc;
      border-radius: 8px;
      margin-top: 0.5rem;
    }

    select {
      width: 100%;
      padding: 10px;
      border: 2px solid #ccc;
      border-radius: 8px;
      margin-bottom: 1rem;
    }

    button {
      width: 30%;
      padding: 10px;
      border: none;
      margin: 0.5rem 1%;
      border-radius: 8px;
      background-color: #4f46e5;
      color: white;
      font-weight: bold;
      cursor: pointer;
    }

    button:hover {
      background-color: #4338ca;
    }

    .button-group {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
    }

    #outputSection {
      margin-top: 1rem;
      background: #f9f9f9;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }

    canvas {
      max-width: 100%;
      margin-top: 1rem;
    }

    #previewArea {
      display: none;
      margin-top: 2rem;
      padding: 1rem;
      border: 2px dashed #ccc;
      border-radius: 10px;
      background: #fffaf0;
    }

    .preview-buttons {
      margin-top: 1rem;
      display: flex;
      justify-content: space-around;
      flex-wrap: wrap;
    }

    footer {
      text-align: center;
      padding: 1rem;
      margin-top: 2rem;
      background-color: #f1f5f9;
      font-size: 0.9rem;
    }

    footer a {
      color: #1d4ed8;
      text-decoration: none;
    }

    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="logo">
      <img src="logo.png" alt="Pratix Finance Logo">
    </div>

    <h2>ğŸ“… EMI Calculator</h2>

    <!-- Language Selector -->
    <label for="language">ğŸŒ Select Language</label>
    <select id="language" onchange="changeLanguage()">
      <option value="en">English</option>
      <option value="hi">Hindi</option>
      <option value="bn">Bengali</option>
      <option value="fr">French</option>
      <option value="ru">Russian</option>
      <option value="es">Spanish</option>
      <option value="ja">Japanese</option>
      <option value="ko">Korean</option>
    </select>

    <!-- Input Section -->
    <label id="loanAmountLabel" for="loanAmount">ğŸ’° Loan Amount</label>
    <input type="number" id="loanAmount" placeholder="Enter loan amount" />

    <label id="interestRateLabel" for="interestRate">ğŸ“ˆ Annual Interest Rate (%)</label>
    <input type="number" id="interestRate" placeholder="Enter interest rate" />

    <label id="loanTenureLabel" for="loanTenure">ğŸ“… Loan Tenure (in months)</label>
    <input type="number" id="loanTenure" placeholder="Enter tenure in months" />

    <!-- Buttons -->
    <div class="button-group">
      <button id="calculateBtn" onclick="calculateEMI()">Calculate</button>
      <button id="resetBtn" onclick="resetForm()">Reset</button>
      <button id="previewBtn" onclick="showPreview()">Preview</button>
    </div>

    <!-- Output -->
    <div id="outputSection">
      <h3 id="resultTitle">ğŸ“Š EMI Result</h3>
      <p id="emiResult"></p>
      <p id="totalPaymentResult"></p>
      <p id="totalInterestResult"></p>

      <canvas id="emiPieChart"></canvas>
      <canvas id="emiBarChart"></canvas>
    </div>

    <!-- Preview Area -->
    <div id="previewArea">
      <div id="previewContent"></div>
      <div class="preview-buttons">
        <button onclick="downloadImage()">ğŸ“· Download Image</button>
        <button onclick="downloadPDF()">ğŸ“„ Download PDF</button>
        <button onclick="sharePreview()">ğŸ”— Share</button>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      EMI Calculator by <strong>Pratix Finance</strong> | Contact: <a href="mailto:pratixfinance@gmail.com">pratixfinance@gmail.com</a>
    </footer>
  </div>
<!-- JS Libraries -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  const translations = {
    en: {
      loanAmountLabel: "ğŸ’° Loan Amount",
      interestRateLabel: "ğŸ“ˆ Annual Interest Rate (%)",
      loanTenureLabel: "ğŸ“… Loan Tenure (in months)",
      resultTitle: "ğŸ“Š EMI Result",
      calculate: "Calculate",
      reset: "Reset",
      preview: "Preview",
    },
    hi: {
      loanAmountLabel: "ğŸ’° à¤‹à¤£ à¤°à¤¾à¤¶à¤¿",
      interestRateLabel: "ğŸ“ˆ à¤µà¤¾à¤°à¥à¤·à¤¿à¤• à¤¬à¥à¤¯à¤¾à¤œ à¤¦à¤° (%)",
      loanTenureLabel: "ğŸ“… à¤‹à¤£ à¤…à¤µà¤§à¤¿ (à¤®à¤¹à¥€à¤¨à¥‹à¤‚ à¤®à¥‡à¤‚)",
      resultTitle: "ğŸ“Š à¤ˆà¤à¤®à¤†à¤ˆ à¤ªà¤°à¤¿à¤£à¤¾à¤®",
      calculate: "à¤—à¤£à¤¨à¤¾ à¤•à¤°à¥‡à¤‚",
      reset: "à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
      preview: "à¤ªà¥‚à¤°à¥à¤µà¤¾à¤µà¤²à¥‹à¤•à¤¨",
    },
    bn: {
      loanAmountLabel: "ğŸ’° à¦‹à¦£à§‡à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦£",
      interestRateLabel: "ğŸ“ˆ à¦¬à¦¾à¦°à§à¦·à¦¿à¦• à¦¸à§à¦¦à§‡à¦° à¦¹à¦¾à¦° (%)",
      loanTenureLabel: "ğŸ“… à¦‹à¦£à§‡à¦° à¦®à§‡à¦¯à¦¼à¦¾à¦¦ (à¦®à¦¾à¦¸à§‡)",
      resultTitle: "ğŸ“Š EMI à¦«à¦²à¦¾à¦«à¦²",
      calculate: "à¦—à¦£à¦¨à¦¾ à¦•à¦°à§à¦¨",
      reset: "à¦°à¦¿à¦¸à§‡à¦Ÿ à¦•à¦°à§à¦¨",
      preview: "à¦ªà§‚à¦°à§à¦¬à¦°à§‚à¦ª à¦¦à§‡à¦–à§à¦¨",
    },
    fr: {
      loanAmountLabel: "ğŸ’° Montant du prÃªt",
      interestRateLabel: "ğŸ“ˆ Taux d'intÃ©rÃªt annuel (%)",
      loanTenureLabel: "ğŸ“… DurÃ©e du prÃªt (mois)",
      resultTitle: "ğŸ“Š RÃ©sultat de l'EMI",
      calculate: "Calculer",
      reset: "RÃ©initialiser",
      preview: "AperÃ§u",
    },
    ru: {
      loanAmountLabel: "ğŸ’° Ğ¡ÑƒĞ¼Ğ¼Ğ° ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ°",
      interestRateLabel: "ğŸ“ˆ Ğ“Ğ¾Ğ´Ğ¾Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ½Ğ°Ñ ÑÑ‚Ğ°Ğ²ĞºĞ° (%)",
      loanTenureLabel: "ğŸ“… Ğ¡Ñ€Ğ¾Ğº ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ° (Ğ² Ğ¼ĞµÑÑÑ†Ğ°Ñ…)",
      resultTitle: "ğŸ“Š Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ EMI",
      calculate: "Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ",
      reset: "Ğ¡Ğ±Ñ€Ğ¾Ñ",
      preview: "ĞŸÑ€ĞµĞ´Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€",
    },
    es: {
      loanAmountLabel: "ğŸ’° Monto del prÃ©stamo",
      interestRateLabel: "ğŸ“ˆ Tasa de interÃ©s anual (%)",
      loanTenureLabel: "ğŸ“… Plazo del prÃ©stamo (meses)",
      resultTitle: "ğŸ“Š Resultado EMI",
      calculate: "Calcular",
      reset: "Restablecer",
      preview: "Vista previa",
    },
    ja: {
      loanAmountLabel: "ğŸ’° ãƒ­ãƒ¼ãƒ³é‡‘é¡",
      interestRateLabel: "ğŸ“ˆ å¹´åˆ©ç‡ (%)",
      loanTenureLabel: "ğŸ“… ãƒ­ãƒ¼ãƒ³æœŸé–“ï¼ˆæœˆï¼‰",
      resultTitle: "ğŸ“Š EMIçµæœ",
      calculate: "è¨ˆç®—ã™ã‚‹",
      reset: "ãƒªã‚»ãƒƒãƒˆ",
      preview: "ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",
    },
    ko: {
      loanAmountLabel: "ğŸ’° ëŒ€ì¶œ ê¸ˆì•¡",
      interestRateLabel: "ğŸ“ˆ ì—° ì´ììœ¨ (%)",
      loanTenureLabel: "ğŸ“… ëŒ€ì¶œ ê¸°ê°„(ê°œì›”)",
      resultTitle: "ğŸ“Š EMI ê²°ê³¼",
      calculate: "ê³„ì‚°",
      reset: "ì¬ì„¤ì •",
      preview: "ë¯¸ë¦¬ë³´ê¸°",
    }
  };

  function changeLanguage() {
    const lang = document.getElementById("language").value;
    const t = translations[lang];
    document.getElementById("loanAmountLabel").textContent = t.loanAmountLabel;
    document.getElementById("interestRateLabel").textContent = t.interestRateLabel;
    document.getElementById("loanTenureLabel").textContent = t.loanTenureLabel;
    document.getElementById("resultTitle").textContent = t.resultTitle;
    document.getElementById("calculateBtn").textContent = t.calculate;
    document.getElementById("resetBtn").textContent = t.reset;
    document.getElementById("previewBtn").textContent = t.preview;
  }

  function calculateEMI() {
    const P = parseFloat(document.getElementById("loanAmount").value);
    const R = parseFloat(document.getElementById("interestRate").value) / 1200;
    const N = parseFloat(document.getElementById("loanTenure").value);

    if (!P || !R || !N) {
      alert("Please enter all values correctly.");
      return;
    }

    const emi = P * R * Math.pow(1 + R, N) / (Math.pow(1 + R, N) - 1);
    const totalPayment = emi * N;
    const totalInterest = totalPayment - P;

    document.getElementById("emiResult").textContent = `Monthly EMI: â‚¹${emi.toFixed(2)}`;
    document.getElementById("totalPaymentResult").textContent = `Total Payment: â‚¹${totalPayment.toFixed(2)}`;
    document.getElementById("totalInterestResult").textContent = `Total Interest: â‚¹${totalInterest.toFixed(2)}`;

    createCharts(P, totalInterest);
  }

  let pieChart, barChart;

  function createCharts(principal, interest) {
    const pieCtx = document.getElementById("emiPieChart").getContext("2d");
    const barCtx = document.getElementById("emiBarChart").getContext("2d");

    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();

    pieChart = new Chart(pieCtx, {
      type: 'pie',
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{
          data: [principal, interest],
          backgroundColor: ["#3b82f6", "#facc15"]
        }]
      }
    });

    barChart = new Chart(barCtx, {
      type: 'bar',
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{
          label: "Amount",
          data: [principal, interest],
          backgroundColor: ["#3b82f6", "#facc15"]
        }]
      }
    });
  }

  function resetForm() {
    document.getElementById("loanAmount").value = '';
    document.getElementById("interestRate").value = '';
    document.getElementById("loanTenure").value = '';
    document.getElementById("emiResult").textContent = '';
    document.getElementById("totalPaymentResult").textContent = '';
    document.getElementById("totalInterestResult").textContent = '';
    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();
    document.getElementById("previewArea").style.display = "none";
  }

  function showPreview() {
    const previewHTML = `
      <div style="text-align:center;">
        <img src="logo.png" style="height:40px;" alt="Logo">
        <h3>ğŸ“… EMI Calculator Result</h3>
        <p>${document.getElementById("loanAmountLabel").textContent}: â‚¹${document.getElementById("loanAmount").value}</p>
        <p>${document.getElementById("interestRateLabel").textContent}: ${document.getElementById("interestRate").value}%</p>
        <p>${document.getElementById("loanTenureLabel").textContent}: ${document.getElementById("loanTenure").value} months</p>
        <p>${document.getElementById("emiResult").textContent}</p>
        <p>${document.getElementById("totalPaymentResult").textContent}</p>
        <p>${document.getElementById("totalInterestResult").textContent}</p>
      </div>
    `;

    document.getElementById("previewContent").innerHTML = previewHTML;
    document.getElementById("previewArea").style.display = "block";
  }

  async function downloadImage() {
    const area = document.getElementById("previewArea");
    const canvas = await html2canvas(area);
    const imgData = canvas.toDataURL("image/png");
    const link = document.createElement("a");
    link.download = "emi-result.png";
    link.href = imgData;
    link.click();
  }

  async function downloadPDF() {
    const area = document.getElementById("previewArea");
    const canvas = await html2canvas(area);
    const imgData = canvas.toDataURL("image/png");

    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF();
    const width = pdf.internal.pageSize.getWidth();
    const height = (canvas.height * width) / canvas.width;

    pdf.addImage(imgData, 'PNG', 0, 0, width, height);
    pdf.save("emi-result.pdf");
  }

  function sharePreview() {
    const text = document.getElementById("emiResult").textContent + '\n' +
                 document.getElementById("totalPaymentResult").textContent + '\n' +
                 document.getElementById("totalInterestResult").textContent;

    if (navigator.share) {
      navigator.share({
        title: 'EMI Calculation Result',
        text: text,
        url: window.location.href
      });
    } else {
      alert("Sharing is not supported on this device.");
    }
  }
</script>
</body>
</html>
