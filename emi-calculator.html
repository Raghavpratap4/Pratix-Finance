<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Advanced EMI Calculator | Pratix Finance</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://unpkg.com/i18next@21.6.14/dist/umd/i18next.min.js"></script>
  <script src="https://unpkg.com/i18next-browser-languagedetector@6.1.3/dist/umd/i18nextBrowserLanguageDetector.min.js"></script>
  <script src="https://unpkg.com/i18next-http-backend@1.4.3/i18nextHttpBackend.min.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #3f0d65, #5b21b6);
      color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
    }
    .container {
      width: 100%;
      max-width: 500px;
      background: rgba(17, 17, 17, 0.75);
      border-radius: 20px;
      backdrop-filter: blur(10px);
      padding: 2rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .header h2 {
      margin: 0;
      font-weight: 600;
      font-size: 1.5rem;
    }
    .lang-select {
      background: rgba(255,255,255,0.1);
      color: #fff;
      border: none;
      padding: 8px;
      border-radius: 8px;
      font-size: 0.9rem;
    }
    .input-group {
      margin-bottom: 1rem;
    }
    .input-group label {
      font-weight: 500;
      margin-bottom: 5px;
      display: block;
    }
    .input-group input, .input-group select {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: none;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }
    .input-group input::placeholder {
      color: #ccc;
    }
    button {
      background: #6366f1;
      border: none;
      border-radius: 12px;
      padding: 12px;
      font-size: 1rem;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
      width: 100%;
      margin-top: 10px;
    }
    button:hover {
      background: #4f46e5;
    }
    .summary {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      padding: 1rem;
      margin-top: 1.5rem;
    }
    .summary p {
      margin: 8px 0;
    }
    canvas {
      margin-top: 1rem;
      max-width: 100%;
    }
    .toggle-row {
      display: flex;
      justify-content: space-between;
      margin: 10px 0;
      gap: 10px;
      flex-wrap: wrap;
    }
    footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 0.85rem;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h2 id="title">EMI Calculator</h2>
      <select id="languageSelector" class="lang-select">
        <option value="en">English</option>
        <option value="hi">हिन्दी</option>
        <option value="bn">বাংলা</option>
        <option value="fr">Français</option>
        <option value="ru">Русский</option>
        <option value="de">Deutsch</option>
        <option value="es">Español</option>
        <option value="ko">한국어</option>
        <option value="ja">日本語</option>
      </select>
    </div>

    <div class="input-group">
      <label id="loanLabel" for="loanAmount">Loan Amount</label>
      <input type="number" id="loanAmount" placeholder="Enter loan amount" />
    </div>

    <div class="input-group">
      <label id="interestLabel" for="interestRate">Annual Interest Rate (%)</label>
      <input type="number" id="interestRate" step="0.01" placeholder="e.g. 7.5" />
    </div>

    <div class="input-group">
      <label id="tenureLabel" for="loanTenure">Tenure (in months)</label>
      <input type="number" id="loanTenure" placeholder="e.g. 60" />
    </div>

    <button id="calculateBtn">Calculate EMI</button>
    <button id="downloadPdfBtn">Download PDF</button>
    <button id="viewTableBtn">View Monthly Table</button>
    <button id="compareBtn">Compare Loan</button>

    <div class="summary" id="resultSection" style="display:none;">
      <p><strong id="emiText">EMI:</strong> ₹<span id="emiAmount">0</span></p>
      <p><strong id="totalPaymentText">Total Payment:</strong> ₹<span id="totalPayment">0</span></p>
      <p><strong id="totalInterestText">Total Interest:</strong> ₹<span id="totalInterest">0</span></p>
    </div>

    <div class="toggle-row">
      <label><input type="radio" name="chartType" value="bar" checked /> Bar</label>
      <label><input type="radio" name="chartType" value="pie" /> Pie</label>
      <label><input type="radio" name="chartType" value="line" /> Line</label>
    </div>

    <canvas id="emiChart"></canvas>

    <footer>
      PRATIX FINANCE<br>
      Raghav Pratap © 2025
    </footer>
  </div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<script>
  const loanInput = document.getElementById('loanAmount');
  const rateInput = document.getElementById('interestRate');
  const tenureInput = document.getElementById('loanTenure');
  const resultSection = document.getElementById('resultSection');
  const emiAmount = document.getElementById('emiAmount');
  const totalPayment = document.getElementById('totalPayment');
  const totalInterest = document.getElementById('totalInterest');
  const languageSelector = document.getElementById('languageSelector');
  const calculateBtn = document.getElementById('calculateBtn');
  const viewTableBtn = document.getElementById('viewTableBtn');
  const compareBtn = document.getElementById('compareBtn');
  const downloadPdfBtn = document.getElementById('downloadPdfBtn');
  let chart;

  function calculateEMI() {
    const P = parseFloat(loanInput.value);
    const r = parseFloat(rateInput.value) / 12 / 100;
    const n = parseInt(tenureInput.value);

    if (isNaN(P) || isNaN(r) || isNaN(n) || P <= 0 || r <= 0 || n <= 0) {
      alert(translations[currentLang].invalidInput);
      return;
    }

    const emi = P * r * Math.pow(1 + r, n) / (Math.pow(1 + r, n) - 1);
    const total = emi * n;
    const interest = total - P;

    emiAmount.textContent = emi.toFixed(2);
    totalPayment.textContent = total.toFixed(2);
    totalInterest.textContent = interest.toFixed(2);
    resultSection.style.display = 'block';

    drawChart(P, interest);
  }

  function drawChart(principal, interest) {
    const ctx = document.getElementById('emiChart').getContext('2d');
    const type = document.querySelector('input[name="chartType"]:checked').value;

    if (chart) chart.destroy();
    chart = new Chart(ctx, {
      type: type,
      data: {
        labels: ['Principal', 'Interest'],
        datasets: [{
          label: 'Breakup',
          data: [principal, interest],
          backgroundColor: ['#10b981', '#f59e0b']
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } }
      }
    });
  }

  function generatePDF() {
    const element = document.querySelector('.container');
    html2pdf().from(element).save('EMI-Report.pdf');
  }

  const translations = {
    en: {
      title: 'EMI Calculator',
      loanLabel: 'Loan Amount',
      interestLabel: 'Annual Interest Rate (%)',
      tenureLabel: 'Tenure (in months)',
      emiText: 'EMI:',
      totalPaymentText: 'Total Payment:',
      totalInterestText: 'Total Interest:',
      calculate: 'Calculate EMI',
      viewTable: 'View Monthly Table',
      compare: 'Compare Loan',
      download: 'Download PDF',
      invalidInput: 'Please enter valid numbers'
    },
    hi: {
      title: 'ईएमआई कैलकुलेटर',
      loanLabel: 'ऋण राशि',
      interestLabel: 'वार्षिक ब्याज दर (%)',
      tenureLabel: 'कार्यकाल (महीनों में)',
      emiText: 'ईएमआई:',
      totalPaymentText: 'कुल भुगतान:',
      totalInterestText: 'कुल ब्याज:',
      calculate: 'ईएमआई गणना करें',
      viewTable: 'मासिक तालिका देखें',
      compare: 'ऋण की तुलना करें',
      download: 'पीडीएफ डाउनलोड करें',
      invalidInput: 'कृपया मान्य संख्या दर्ज करें'
    },
    bn: {
      title: 'ইএমআই ক্যালকুলেটর',
      loanLabel: 'ঋণের পরিমাণ',
      interestLabel: 'বার্ষিক সুদের হার (%)',
      tenureLabel: 'মেয়াদ (মাসে)',
      emiText: 'ইএমআই:',
      totalPaymentText: 'মোট পরিশোধ:',
      totalInterestText: 'মোট সুদ:',
      calculate: 'ইএমআই হিসাব করুন',
      viewTable: 'মাসিক টেবিল দেখুন',
      compare: 'ঋণ তুলনা করুন',
      download: 'পিডিএফ ডাউনলোড করুন',
      invalidInput: 'দয়া করে সঠিক সংখ্যা লিখুন'
    },
    fr: {
      title: 'Calculateur d\'EMI',
      loanLabel: 'Montant du prêt',
      interestLabel: 'Taux d\'intérêt annuel (%)',
      tenureLabel: 'Durée (en mois)',
      emiText: 'EMI:',
      totalPaymentText: 'Paiement total:',
      totalInterestText: 'Intérêt total:',
      calculate: 'Calculer EMI',
      viewTable: 'Voir le tableau mensuel',
      compare: 'Comparer le prêt',
      download: 'Télécharger le PDF',
      invalidInput: 'Veuillez entrer des nombres valides'
    },
    ru: {
      title: 'Калькулятор EMI',
      loanLabel: 'Сумма кредита',
      interestLabel: 'Годовая процентная ставка (%)',
      tenureLabel: 'Срок (в месяцах)',
      emiText: 'EMI:',
      totalPaymentText: 'Общая выплата:',
      totalInterestText: 'Общий процент:',
      calculate: 'Рассчитать EMI',
      viewTable: 'Просмотр таблицы',
      compare: 'Сравнить кредиты',
      download: 'Скачать PDF',
      invalidInput: 'Введите корректные числа'
    },
    de: {
      title: 'EMI-Rechner',
      loanLabel: 'Darlehensbetrag',
      interestLabel: 'Jährlicher Zinssatz (%)',
      tenureLabel: 'Laufzeit (in Monaten)',
      emiText: 'EMI:',
      totalPaymentText: 'Gesamtzahlung:',
      totalInterestText: 'Gesamtzins:',
      calculate: 'EMI berechnen',
      viewTable: 'Monatstabelle anzeigen',
      compare: 'Kredit vergleichen',
      download: 'PDF herunterladen',
      invalidInput: 'Bitte gültige Zahlen eingeben'
    },
    es: {
      title: 'Calculadora EMI',
      loanLabel: 'Monto del préstamo',
      interestLabel: 'Tasa de interés anual (%)',
      tenureLabel: 'Plazo (en meses)',
      emiText: 'EMI:',
      totalPaymentText: 'Pago total:',
      totalInterestText: 'Interés total:',
      calculate: 'Calcular EMI',
      viewTable: 'Ver tabla mensual',
      compare: 'Comparar préstamo',
      download: 'Descargar PDF',
      invalidInput: 'Por favor ingrese números válidos'
    },
    ko: {
      title: 'EMI 계산기',
      loanLabel: '대출 금액',
      interestLabel: '연이율 (%)',
      tenureLabel: '기간 (개월)',
      emiText: 'EMI:',
      totalPaymentText: '총 지불:',
      totalInterestText: '총 이자:',
      calculate: 'EMI 계산',
      viewTable: '월별 표 보기',
      compare: '대출 비교',
      download: 'PDF 다운로드',
      invalidInput: '유효한 숫자를 입력하세요'
    },
    ja: {
      title: 'EMI計算機',
      loanLabel: 'ローン金額',
      interestLabel: '年利率 (%)',
      tenureLabel: '期間（月）',
      emiText: 'EMI:',
      totalPaymentText: '総支払額:',
      totalInterestText: '総利息:',
      calculate: 'EMIを計算する',
      viewTable: '月次表を表示',
      compare: 'ローンを比較する',
      download: 'PDFをダウンロード',
      invalidInput: '有効な数字を入力してください'
    }
  };

  let currentLang = 'en';

  function applyLanguage(lang) {
    const t = translations[lang];
    currentLang = lang;

    document.getElementById('title').innerText = t.title;
    document.getElementById('loanLabel').innerText = t.loanLabel;
    document.getElementById('interestLabel').innerText = t.interestLabel;
    document.getElementById('tenureLabel').innerText = t.tenureLabel;
    document.getElementById('emiText').innerText = t.emiText;
    document.getElementById('totalPaymentText').innerText = t.totalPaymentText;
    document.getElementById('totalInterestText').innerText = t.totalInterestText;
    calculateBtn.innerText = t.calculate;
    viewTableBtn.innerText = t.viewTable;
    compareBtn.innerText = t.compare;
    downloadPdfBtn.innerText = t.download;
  }

  function detectLanguage() {
    const userLang = navigator.language.slice(0, 2);
    if (translations[userLang]) {
      languageSelector.value = userLang;
      applyLanguage(userLang);
    }
  }

  languageSelector.addEventListener('change', () => {
    applyLanguage(languageSelector.value);
  });

  calculateBtn.addEventListener('click', calculateEMI);
  downloadPdfBtn.addEventListener('click', generatePDF);
  detectLanguage();
</script>
</body>
</html>
