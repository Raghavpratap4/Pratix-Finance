<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Advanced EMI Calculator | Pratix Finance</title>
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="logo.png" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/i18next@23.4.6/dist/umd/i18next.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/i18next-browser-languagedetector@6.1.5/i18nextBrowserLanguageDetector.min.js"></script>
  <style>
    * {
  box-sizing: border-box;
  transition: all 0.3s ease-in-out;
}
body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  background: #0d0d0d;
  color: #fff;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
.container {
  max-width: 800px;
  width: 95%;
  margin: auto;
  padding: 20px;
  background: rgba(255, 255, 255, 0.05);
  border-radius: 15px;
  backdrop-filter: blur(10px);
  box-shadow: 0 0 25px rgba(255, 255, 255, 0.05);
  margin-top: 40px;
}
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
}
.header h2 {
  font-size: 24px;
  margin: 0;
  color: #fff;
}
.header-buttons {
  display: flex;
  gap: 10px;
  margin-top: 10px;
}
input,
select,
button {
  width: 100%;
  padding: 10px;
  margin: 5px 0;
  border: none;
  border-radius: 8px;
  font-size: 16px;
}
input,
select {
  background: rgba(255, 255, 255, 0.1);
  color: #fff;
}
input:focus,
select:focus {
  outline: 2px solid #00bcd4;
}
button {
  background: #00bcd4;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
button:hover {
  background: #1de9b6;
}
.input-group {
  margin: 15px 0;
}
.buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  justify-content: space-between;
  margin: 20px 0;
}
.summary {
  background: rgba(255, 255, 255, 0.08);
  border-radius: 10px;
  padding: 15px;
  margin: 20px 0;
}
.toggle-row {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin: 15px 0;
}
.toggle-row label {
  font-size: 14px;
}
canvas {
  margin: 20px auto;
  max-width: 100%;
}
.faq {
  margin-top: 20px;
  text-align: center;
}
footer {
  text-align: center;
  padding: 15px;
  margin-top: auto;
  color: #888;
  font-size: 14px;
}

/* Responsive Design */
@media (max-width: 768px) {
  .header {
    flex-direction: column;
    align-items: flex-start;
  }
  .buttons {
    flex-direction: column;
  }
  .toggle-row {
    flex-direction: column;
    align-items: flex-start;
  }
}
  </style>
</head>
<body>
  <div class="container" id="app">
    <div class="header">
      <h2 data-i18n="title">Advanced EMI Calculator</h2>
      <div class="header-buttons">
        <select id="languageSelector" onchange="changeLanguage(this.value)">
          <option value="en">English</option>
          <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
          <option value="mr">‡§Æ‡§∞‡§æ‡§†‡•Ä</option>
          <option value="bn">‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ</option>
          <option value="ta">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</option>
          <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
          <option value="gu">‡™ó‡´Å‡™ú‡™∞‡™æ‡™§‡´Ä</option>
          <option value="kn">‡≤ï‡≤®‡≥ç‡≤®‡≤°</option>
          <option value="ml">‡¥Æ‡¥≤‡¥Ø‡¥æ‡¥≥‡¥Ç</option>
        </select>
        <button onclick="installPWA()">Install</button>
      </div>
    </div>

    <div class="input-group">
      <label data-i18n="loanAmount">Loan Amount</label>
      <input type="number" id="loanAmount" placeholder="Enter loan amount" />
    </div>
    <div class="input-group">
      <label data-i18n="interestRate">Interest Rate (%)</label>
      <input type="number" id="interestRate" placeholder="e.g. 8.5" />
    </div>
    <div class="input-group">
      <label data-i18n="loanTerm">Loan Term (Years)</label>
      <input type="number" id="loanTerm" placeholder="e.g. 10" />
    </div>

    <div class="input-group">
      <label data-i18n="prepayFrequency">Prepayment Frequency</label>
      <select id="prepayFreq">
        <option value="none" selected data-i18n="none">None</option>
        <option value="once" data-i18n="once">Once</option>
        <option value="yearly" data-i18n="yearly">Yearly</option>
      </select>
    </div>
    <div class="input-group">
      <label data-i18n="extraPayment">Extra Payment (‚Çπ)</label>
      <input type="number" id="extraPayment" placeholder="e.g. 50000" />
    </div>
    <div class="input-group">
      <label data-i18n="startYear">Start From Year</label>
      <select id="startYear">
        <option value="1">Year 1</option>
        <option value="2">Year 2</option>
        <option value="3">Year 3</option>
        <option value="4">Year 4</option>
      </select>
    </div>

    <div class="input-group">
      <label data-i18n="addons">Add-ons</label>
      <input type="number" id="processingFee" placeholder="Processing Fee (‚Çπ)" />
      <input type="number" id="insurance" placeholder="Insurance Cost (‚Çπ)" />
    </div>

    <div class="buttons">
      <button onclick="calculateEMI()" data-i18n="calculate">Calculate</button>
      <button onclick="generateTable()" data-i18n="monthlyTable">Monthly Table</button>
      <button onclick="compareLoans()" data-i18n="compareLoans">Compare Loans</button>
    </div>

    <div class="summary" id="summaryCard">
      <p><strong data-i18n="emi">EMI:</strong> ‚Çπ<span id="emi">0</span>/month</p>
      <p><strong data-i18n="totalInterest">Total Interest:</strong> ‚Çπ<span id="interest">0</span></p>
      <p><strong data-i18n="totalPayment">Total Payment:</strong> ‚Çπ<span id="payment">0</span></p>
      <p><strong data-i18n="addonsTotal">Add-on Charges:</strong> ‚Çπ<span id="addons">0</span></p>
    </div>

    <div class="toggle-row">
      <label><input type="radio" name="chartType" value="bar" checked onchange="toggleChart()"> <span data-i18n="barChart">Bar Chart</span></label>
      <label><input type="radio" name="chartType" value="pie" onchange="toggleChart()"> <span data-i18n="pieChart">Pie Chart</span></label>
      <label><input type="radio" name="chartType" value="line" onchange="toggleChart()"> <span data-i18n="lineChart">Line Chart</span></label>
    </div>

    <canvas id="emiChart" height="200"></canvas>

    <div class="buttons">
      <button onclick="downloadPDF()" data-i18n="downloadPDF">Download PDF</button>
      <button onclick="downloadImage()" data-i18n="downloadImage">Download Image</button>
      <button onclick="toggleTheme()" data-i18n="toggleTheme">Toggle Theme</button>
    </div>

    <div class="faq">
      <button onclick="openFAQ()" data-i18n="faq">üì£ FAQ / Assistant</button>
    </div>
  </div>

  <footer>
    <p>¬© 2025 Pratix Finance ‚Äî All rights reserved</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const languageData = {
    en: {
      loanAmount: "Loan Amount",
      interestRate: "Interest Rate (%)",
      loanTerm: "Loan Term (years)",
      prepayFreq: "Prepayment Frequency",
      extraPayment: "Extra Payment (‚Çπ)",
      startYear: "Start From Year",
      calculate: "Calculate",
      table: "Monthly Table",
      compare: "Compare Loans",
      emi: "EMI",
      interest: "Total Interest",
      payment: "Total Payment",
      send: "üì© Send Reminder",
      pie: "Pie Chart",
      line: "Line Chart",
      bar: "Bar Chart",
      install: "Install",
      footer: "¬© 2025 Pratix Finance ‚Äî All rights reserved"
    },
    hi: {
      loanAmount: "‡§ã‡§£ ‡§∞‡§æ‡§∂‡§ø",
      interestRate: "‡§¨‡•ç‡§Ø‡§æ‡§ú ‡§¶‡§∞ (%)",
      loanTerm: "‡§ã‡§£ ‡§Ö‡§µ‡§ß‡§ø (‡§µ‡§∞‡•ç‡§∑‡•ã‡§Ç ‡§Æ‡•á‡§Ç)",
      prepayFreq: "‡§Ö‡§ó‡•ç‡§∞‡§ø‡§Æ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø",
      extraPayment: "‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® (‚Çπ)",
      startYear: "‡§ï‡§¨ ‡§∏‡•á ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç",
      calculate: "‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç",
      table: "‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ",
      compare: "‡§ã‡§£ ‡§§‡•Å‡§≤‡§®‡§æ",
      emi: "‡§à‡§è‡§Æ‡§Ü‡§à",
      interest: "‡§ï‡•Å‡§≤ ‡§¨‡•ç‡§Ø‡§æ‡§ú",
      payment: "‡§ï‡•Å‡§≤ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®",
      send: "üì© ‡§∞‡§ø‡§Æ‡§æ‡§á‡§Ç‡§°‡§∞ ‡§≠‡•á‡§ú‡•á‡§Ç",
      pie: "‡§™‡§æ‡§à ‡§ö‡§æ‡§∞‡•ç‡§ü",
      line: "‡§≤‡§æ‡§á‡§® ‡§ö‡§æ‡§∞‡•ç‡§ü",
      bar: "‡§¨‡§æ‡§∞ ‡§ö‡§æ‡§∞‡•ç‡§ü",
      install: "‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç",
      footer: "¬© 2025 ‡§™‡•ç‡§∞‡§æ‡§ü‡§ø‡§ï‡•ç‡§∏ ‡§´‡§æ‡§á‡§®‡•á‡§Ç‡§∏ ‚Äî ‡§∏‡§∞‡•ç‡§µ‡§æ‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§"
    },
    // Add 7 more languages here like ta, te, kn, ml, gu, mr, bn...
  };

  const supportedLangs = Object.keys(languageData);
  let userLang = navigator.language.slice(0, 2);
  if (!supportedLangs.includes(userLang)) userLang = "en";

  function translateUI(lang = userLang) {
    const data = languageData[lang];
    document.querySelector('label[for="loanAmount"]').innerText = data.loanAmount;
    document.querySelector('label[for="interestRate"]').innerText = data.interestRate;
    document.querySelector('label[for="loanTerm"]').innerText = data.loanTerm;
    document.querySelector('label[for="prepayFreq"]').innerText = data.prepayFreq;
    document.querySelector('label[for="extraPayment"]').innerText = data.extraPayment;
    document.querySelector('label[for="startYear"]').innerText = data.startYear;

    document.getElementById("btnCalc").innerText = data.calculate;
    document.getElementById("btnTable").innerText = data.table;
    document.getElementById("btnCompare").innerText = data.compare;
    document.getElementById("btnSend").innerText = data.send;
    document.getElementById("labelPie").innerText = data.pie;
    document.getElementById("labelLine").innerText = data.line;
    document.getElementById("labelBar").innerText = data.bar;
    document.getElementById("installBtn").innerText = data.install;
    document.querySelector("footer").innerText = data.footer;

    document.getElementById("emiLabel").innerText = data.emi;
    document.getElementById("interestLabel").innerText = data.interest;
    document.getElementById("paymentLabel").innerText = data.payment;
  }

  const langSelector = document.getElementById("languageSelector");
  langSelector.value = userLang;
  langSelector.addEventListener("change", (e) => {
    translateUI(e.target.value);
  });

  window.onload = () => {
    translateUI(userLang);
    calculateEMI();
  };

  let chart;
  function calculateEMI() {
    const P = +document.getElementById("loanAmount").value;
    const R = +document.getElementById("interestRate").value / 1200;
    const N = +document.getElementById("loanTerm").value * 12;
    const prepay = +document.getElementById("extraPayment").value;
    const freq = document.getElementById("prepayFreq").value;

    let emi = (P * R * Math.pow(1 + R, N)) / (Math.pow(1 + R, N) - 1);
    let totalPayment = emi * N;
    let totalInterest = totalPayment - P;

    if (freq === "once") {
      totalPayment -= prepay;
      totalInterest -= prepay;
    }

    document.getElementById("emi").innerText = Math.round(emi);
    document.getElementById("interest").innerText = Math.round(totalInterest);
    document.getElementById("payment").innerText = Math.round(totalPayment);

    updateChart(P, totalInterest, prepay);
  }

  function updateChart(principal, interest, prepay) {
    const ctx = document.getElementById("emiChart").getContext("2d");
    if (chart) chart.destroy();

    let type = "pie";
    if (document.getElementById("toggleBar").checked) type = "bar";
    else if (document.getElementById("toggleLine").checked) type = "line";
    else type = "pie";

    chart = new Chart(ctx, {
      type: type,
      data: {
        labels: ["Principal", "Interest", "Prepayment"],
        datasets: [{
          label: "Amount",
          data: [principal, interest, prepay],
          backgroundColor: ["#3b82f6", "#8b5cf6", "#10b981"],
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true },
          tooltip: {
            callbacks: {
              label: function (tooltipItem) {
                return `‚Çπ${tooltipItem.raw}`;
              }
            }
          }
        }
      }
    });
  }

  function installPWA() {
    alert("PWA installation will be implemented later.");
  }

  function sendReminder() {
    alert("EmailJS feature is not enabled.");
  }
</script>



</body>
</html>
