<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>EMI Calculator - Pratix Finance</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { background: linear-gradient(to bottom right, #e0f2fe, #f0fdf4); }
    .card { background: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 2px 20px rgba(0,0,0,0.1); }
    canvas { max-width: 100%; height: auto !important; }
  </style>
</head>
<body class="text-gray-800">
  <div class="max-w-2xl mx-auto mt-6 p-4">
    <div class="flex justify-center mb-4">
      <img src="logo.png" alt="Logo" class="h-12">
    </div>

    <div class="card">
      <h1 class="text-2xl font-bold text-center mb-4">ğŸ“… EMI Calculator</h1>

      <label class="block mb-2 font-medium">ğŸŒ Language:</label>
      <select id="language" onchange="changeLanguage()" class="w-full mb-4 p-2 border rounded">
        <option value="en">English</option>
        <option value="hi">Hindi</option>
        <option value="bn">Bengali</option>
        <option value="fr">French</option>
        <option value="ru">Russian</option>
        <option value="es">Spanish</option>
        <option value="ja">Japanese</option>
        <option value="ko">Korean</option>
      </select>

      <div class="mb-4">
        <label id="loanAmountLabel" class="block font-medium mb-1">ğŸ’° Loan Amount</label>
        <input type="number" id="loanAmount" class="w-full p-2 border rounded"/>
      </div>

      <div class="mb-4">
        <label id="interestRateLabel" class="block font-medium mb-1">ğŸ“ˆ Annual Interest Rate (%)</label>
        <input type="number" id="interestRate" class="w-full p-2 border rounded"/>
      </div>

      <div class="mb-4">
        <label id="loanTenureLabel" class="block font-medium mb-1">ğŸ“… Loan Tenure (in months)</label>
        <input type="number" id="loanTenure" class="w-full p-2 border rounded"/>
      </div>

      <div class="flex justify-between space-x-2 mb-4">
        <button onclick="calculateEMI()" class="bg-blue-600 text-white px-4 py-2 rounded w-1/3">Calculate</button>
        <button onclick="resetForm()" class="bg-gray-400 text-white px-4 py-2 rounded w-1/3">Reset</button>
        <button onclick="showPreview()" class="bg-green-600 text-white px-4 py-2 rounded w-1/3">Preview</button>
      </div>

      <div id="results">
        <h2 class="text-xl font-semibold mb-2">ğŸ“Š EMI Result</h2>
        <p id="emiResult"></p>
        <p id="totalPaymentResult"></p>
        <p id="totalInterestResult"></p>
        <canvas id="emiPieChart" class="my-4"></canvas>
        <canvas id="emiBarChart" class="mb-4"></canvas>
      </div>
    </div>

    <div id="previewArea" class="card mt-6 hidden">
      <div id="previewContent"></div>
      <canvas id="previewPieChart" class="my-4"></canvas>
      <canvas id="previewBarChart" class="mb-4"></canvas>
      <div class="flex justify-between space-x-2 mt-4">
        <button onclick="downloadImage()" class="bg-blue-600 text-white px-4 py-2 rounded w-1/3 preview-action">Download Image</button>
        <button onclick="downloadPDF()" class="bg-red-600 text-white px-4 py-2 rounded w-1/3 preview-action">Download PDF</button>
        <button onclick="sharePreview()" class="bg-green-600 text-white px-4 py-2 rounded w-1/3 preview-action">Share</button>
      </div>
    </div>

    <footer class="text-center text-sm text-gray-500 mt-6">
      Contact: <a href="mailto:pratixfinance4@gmail.com" class="text-blue-600 underline">pratixfinance4@gmail.com</a>
    </footer>
  </div>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
  const translations = {
  en: {
    title: "ğŸ“… EMI Calculator",
    loanAmount: "ğŸ’° Loan Amount",
    interestRate: "ğŸ“ˆ Annual Interest Rate (%)",
    loanTenure: "ğŸ“… Loan Tenure (in months)",
    calculate: "Calculate",
    reset: "Reset",
    preview: "Preview",
    emiResult: "ğŸ“Œ Monthly EMI",
    totalPayment: "ğŸ’µ Total Payment",
    totalInterest: "ğŸ“ˆ Total Interest",
    resultTitle: "ğŸ“Š EMI Result",
    downloadImage: "Download Image",
    downloadPDF: "Download PDF",
    share: "Share",
    contact: "Contact"
  },
  hi: {
    title: "ğŸ“… à¤ˆà¤à¤®à¤†à¤ˆ à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°",
    loanAmount: "ğŸ’° à¤‹à¤£ à¤°à¤¾à¤¶à¤¿",
    interestRate: "ğŸ“ˆ à¤µà¤¾à¤°à¥à¤·à¤¿à¤• à¤¬à¥à¤¯à¤¾à¤œ à¤¦à¤° (%)",
    loanTenure: "ğŸ“… à¤‹à¤£ à¤…à¤µà¤§à¤¿ (à¤®à¤¹à¥€à¤¨à¥‹à¤‚ à¤®à¥‡à¤‚)",
    calculate: "à¤—à¤£à¤¨à¤¾ à¤•à¤°à¥‡à¤‚",
    reset: "à¤°à¥€à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‡à¤‚",
    preview: "à¤ªà¥‚à¤°à¥à¤µà¤¾à¤µà¤²à¥‹à¤•à¤¨",
    emiResult: "ğŸ“Œ à¤®à¤¾à¤¸à¤¿à¤• à¤ˆà¤à¤®à¤†à¤ˆ",
    totalPayment: "ğŸ’µ à¤•à¥à¤² à¤­à¥à¤—à¤¤à¤¾à¤¨",
    totalInterest: "ğŸ“ˆ à¤•à¥à¤² à¤¬à¥à¤¯à¤¾à¤œ",
    resultTitle: "ğŸ“Š à¤ˆà¤à¤®à¤†à¤ˆ à¤ªà¤°à¤¿à¤£à¤¾à¤®",
    downloadImage: "à¤›à¤µà¤¿ à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚",
    downloadPDF: "à¤ªà¥€à¤¡à¥€à¤à¤« à¤¡à¤¾à¤‰à¤¨à¤²à¥‹à¤¡ à¤•à¤°à¥‡à¤‚",
    share: "à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚",
    contact: "à¤¸à¤‚à¤ªà¤°à¥à¤• à¤•à¤°à¥‡à¤‚"
  },
  bn: {
    title: "ğŸ“… à¦‡à¦à¦®à¦†à¦‡ à¦•à§à¦¯à¦¾à¦²à¦•à§à¦²à§‡à¦Ÿà¦°",
    loanAmount: "ğŸ’° à¦‹à¦£à§‡à¦° à¦ªà¦°à¦¿à¦®à¦¾à¦£",
    interestRate: "ğŸ“ˆ à¦¬à¦¾à¦°à§à¦·à¦¿à¦• à¦¸à§à¦¦à§‡à¦° à¦¹à¦¾à¦° (%)",
    loanTenure: "ğŸ“… à¦‹à¦£à§‡à¦° à¦®à§‡à¦¯à¦¼à¦¾à¦¦ (à¦®à¦¾à¦¸à§‡)",
    calculate: "à¦—à¦£à¦¨à¦¾ à¦•à¦°à§à¦¨",
    reset: "à¦°à¦¿à¦¸à§‡à¦Ÿ à¦•à¦°à§à¦¨",
    preview: "à¦ªà§à¦°à¦¿à¦­à¦¿à¦‰",
    emiResult: "ğŸ“Œ à¦®à¦¾à¦¸à¦¿à¦• à¦‡à¦à¦®à¦†à¦‡",
    totalPayment: "ğŸ’µ à¦®à§‹à¦Ÿ à¦ªà¦°à¦¿à¦¶à§‹à¦§",
    totalInterest: "ğŸ“ˆ à¦®à§‹à¦Ÿ à¦¸à§à¦¦",
    resultTitle: "ğŸ“Š à¦‡à¦à¦®à¦†à¦‡ à¦«à¦²à¦¾à¦«à¦²",
    downloadImage: "à¦›à¦¬à¦¿ à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦•à¦°à§à¦¨",
    downloadPDF: "PDF à¦¡à¦¾à¦‰à¦¨à¦²à§‹à¦¡ à¦•à¦°à§à¦¨",
    share: "à¦¶à§‡à¦¯à¦¼à¦¾à¦° à¦•à¦°à§à¦¨",
    contact: "à¦¯à§‹à¦—à¦¾à¦¯à§‹à¦—"
  },
  fr: {
    title: "ğŸ“… Calculateur EMI",
    loanAmount: "ğŸ’° Montant du prÃªt",
    interestRate: "ğŸ“ˆ Taux d'intÃ©rÃªt annuel (%)",
    loanTenure: "ğŸ“… DurÃ©e du prÃªt (en mois)",
    calculate: "Calculer",
    reset: "RÃ©initialiser",
    preview: "AperÃ§u",
    emiResult: "ğŸ“Œ EMI mensuelle",
    totalPayment: "ğŸ’µ Paiement total",
    totalInterest: "ğŸ“ˆ IntÃ©rÃªt total",
    resultTitle: "ğŸ“Š RÃ©sultat EMI",
    downloadImage: "TÃ©lÃ©charger l'image",
    downloadPDF: "TÃ©lÃ©charger le PDF",
    share: "Partager",
    contact: "Contact"
  },
  ru: {
    title: "ğŸ“… ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ EMI",
    loanAmount: "ğŸ’° Ğ¡ÑƒĞ¼Ğ¼Ğ° ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ°",
    interestRate: "ğŸ“ˆ Ğ“Ğ¾Ğ´Ğ¾Ğ²Ğ°Ñ Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ½Ğ°Ñ ÑÑ‚Ğ°Ğ²ĞºĞ° (%)",
    loanTenure: "ğŸ“… Ğ¡Ñ€Ğ¾Ğº ĞºÑ€ĞµĞ´Ğ¸Ñ‚Ğ° (Ğ² Ğ¼ĞµÑÑÑ†Ğ°Ñ…)",
    calculate: "Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ",
    reset: "Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ",
    preview: "ĞŸÑ€ĞµĞ´Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€",
    emiResult: "ğŸ“Œ Ğ•Ğ¶ĞµĞ¼ĞµÑÑÑ‡Ğ½Ñ‹Ğ¹ Ğ¿Ğ»Ğ°Ñ‚ĞµĞ¶ (EMI)",
    totalPayment: "ğŸ’µ ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ²Ñ‹Ğ¿Ğ»Ğ°Ñ‚Ñ‹",
    totalInterest: "ğŸ“ˆ ĞĞ±Ñ‰Ğ°Ñ ÑÑƒĞ¼Ğ¼Ğ° Ğ¿Ñ€Ğ¾Ñ†ĞµĞ½Ñ‚Ğ¾Ğ²",
    resultTitle: "ğŸ“Š Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚ EMI",
    downloadImage: "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ",
    downloadPDF: "Ğ¡ĞºĞ°Ñ‡Ğ°Ñ‚ÑŒ PDF",
    share: "ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ",
    contact: "ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚"
  },
  es: {
    title: "ğŸ“… Calculadora EMI",
    loanAmount: "ğŸ’° Monto del prÃ©stamo",
    interestRate: "ğŸ“ˆ Tasa de interÃ©s anual (%)",
    loanTenure: "ğŸ“… Plazo del prÃ©stamo (en meses)",
    calculate: "Calcular",
    reset: "Restablecer",
    preview: "Vista previa",
    emiResult: "ğŸ“Œ EMI mensual",
    totalPayment: "ğŸ’µ Pago total",
    totalInterest: "ğŸ“ˆ InterÃ©s total",
    resultTitle: "ğŸ“Š Resultado EMI",
    downloadImage: "Descargar imagen",
    downloadPDF: "Descargar PDF",
    share: "Compartir",
    contact: "Contacto"
  },
  ja: {
    title: "ğŸ“… EMIè¨ˆç®—æ©Ÿ",
    loanAmount: "ğŸ’° ãƒ­ãƒ¼ãƒ³é‡‘é¡",
    interestRate: "ğŸ“ˆ å¹´åˆ©ç‡ (%)",
    loanTenure: "ğŸ“… ãƒ­ãƒ¼ãƒ³æœŸé–“ï¼ˆæœˆå˜ä½ï¼‰",
    calculate: "è¨ˆç®—ã™ã‚‹",
    reset: "ãƒªã‚»ãƒƒãƒˆ",
    preview: "ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼",
    emiResult: "ğŸ“Œ æœˆé¡EMI",
    totalPayment: "ğŸ’µ ç·æ”¯æ‰•ã„é¡",
    totalInterest: "ğŸ“ˆ ç·åˆ©æ¯",
    resultTitle: "ğŸ“Š EMIçµæœ",
    downloadImage: "ç”»åƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    downloadPDF: "PDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
    share: "å…±æœ‰",
    contact: "ãŠå•ã„åˆã‚ã›"
  },
  ko: {
    title: "ğŸ“… EMI ê³„ì‚°ê¸°",
    loanAmount: "ğŸ’° ëŒ€ì¶œ ê¸ˆì•¡",
    interestRate: "ğŸ“ˆ ì—°ì´ìœ¨ (%)",
    loanTenure: "ğŸ“… ëŒ€ì¶œ ê¸°ê°„ (ê°œì›”)",
    calculate: "ê³„ì‚°í•˜ê¸°",
    reset: "ì´ˆê¸°í™”",
    preview: "ë¯¸ë¦¬ë³´ê¸°",
    emiResult: "ğŸ“Œ ì›” EMI",
    totalPayment: "ğŸ’µ ì´ ìƒí™˜ì•¡",
    totalInterest: "ğŸ“ˆ ì´ ì´ì",
    resultTitle: "ğŸ“Š EMI ê²°ê³¼",
    downloadImage: "ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ",
    downloadPDF: "PDF ë‹¤ìš´ë¡œë“œ",
    share: "ê³µìœ í•˜ê¸°",
    contact: "ë¬¸ì˜"
  }
};

let pieChart, barChart, previewPieChart, previewBarChart;

function calculateEMI() {
  const principal = parseFloat(document.getElementById("loanAmount").value);
  const rate = parseFloat(document.getElementById("interestRate").value) / 1200;
  const months = parseInt(document.getElementById("loanTenure").value);

  if (!principal || !rate || !months) {
    alert("Please enter valid input values.");
    return;
  }

  const emi = (principal * rate * Math.pow(1 + rate, months)) / (Math.pow(1 + rate, months) - 1);
  const totalPayment = emi * months;
  const totalInterest = totalPayment - principal;

  document.getElementById("emiResult").innerHTML = `ğŸ“Œ Monthly EMI: â‚¹${emi.toFixed(2)}`;
  document.getElementById("totalPaymentResult").innerHTML = `ğŸ’µ Total Payment: â‚¹${totalPayment.toFixed(2)}`;
  document.getElementById("totalInterestResult").innerHTML = `ğŸ“ˆ Total Interest: â‚¹${totalInterest.toFixed(2)}`;

  renderCharts(principal, totalInterest);
}

function resetForm() {
  document.getElementById("loanAmount").value = "";
  document.getElementById("interestRate").value = "";
  document.getElementById("loanTenure").value = "";
  document.getElementById("emiResult").innerHTML = "";
  document.getElementById("totalPaymentResult").innerHTML = "";
  document.getElementById("totalInterestResult").innerHTML = "";
  if (pieChart) pieChart.destroy();
  if (barChart) barChart.destroy();
}

function renderCharts(principal, interest) {
  const ctx1 = document.getElementById("emiPieChart").getContext("2d");
  const ctx2 = document.getElementById("emiBarChart").getContext("2d");

  if (pieChart) pieChart.destroy();
  if (barChart) barChart.destroy();

  pieChart = new Chart(ctx1, {
    type: "pie",
    data: {
      labels: ["Principal", "Interest"],
      datasets: [{
        data: [principal, interest],
        backgroundColor: ["#3b82f6", "#f97316"],
      }],
    },
  });

  barChart = new Chart(ctx2, {
    type: "bar",
    data: {
      labels: ["Principal", "Interest"],
      datasets: [{
        label: "Amount (â‚¹)",
        data: [principal, interest],
        backgroundColor: ["#3b82f6", "#f97316"],
      }],
    },
  });
}

function showPreview() {
  const principal = parseFloat(document.getElementById("loanAmount").value);
  const interestRate = parseFloat(document.getElementById("interestRate").value);
  const tenure = parseInt(document.getElementById("loanTenure").value);
  if (!principal || !interestRate || !tenure) return alert("Fill inputs first.");

  const rate = interestRate / 1200;
  const emi = (principal * rate * Math.pow(1 + rate, tenure)) / (Math.pow(1 + rate, tenure) - 1);
  const totalPayment = emi * tenure;
  const totalInterest = totalPayment - principal;

  const html = `
    <div class="text-center mb-4">
      <img src="logo.png" alt="Logo" class="h-12 mx-auto mb-2"/>
      <h2 class="text-xl font-bold">ğŸ“… EMI Calculator</h2>
    </div>
    <div class="text-sm mb-2">
      <p>ğŸ’° Loan Amount: â‚¹${principal}</p>
      <p>ğŸ“ˆ Annual Interest Rate: ${interestRate}%</p>
      <p>ğŸ“… Loan Tenure: ${tenure} months</p>
      <p>ğŸ“Œ Monthly EMI: â‚¹${emi.toFixed(2)}</p>
      <p>ğŸ’µ Total Payment: â‚¹${totalPayment.toFixed(2)}</p>
      <p>ğŸ“ˆ Total Interest: â‚¹${totalInterest.toFixed(2)}</p>
    </div>
  `;
  document.getElementById("previewContent").innerHTML = html;

  const pctx = document.getElementById("previewPieChart").getContext("2d");
  const bctx = document.getElementById("previewBarChart").getContext("2d");

  if (previewPieChart) previewPieChart.destroy();
  if (previewBarChart) previewBarChart.destroy();

  previewPieChart = new Chart(pctx, {
    type: "pie",
    data: {
      labels: ["Principal", "Interest"],
      datasets: [{
        data: [principal, totalInterest],
        backgroundColor: ["#3b82f6", "#f97316"],
      }],
    },
  });

  previewBarChart = new Chart(bctx, {
    type: "bar",
    data: {
      labels: ["Principal", "Interest"],
      datasets: [{
        label: "Amount (â‚¹)",
        data: [principal, totalInterest],
        backgroundColor: ["#3b82f6", "#f97316"],
      }],
    },
  });

  document.getElementById("previewArea").classList.remove("hidden");
}

function hideButtonsTemporarily() {
  document.querySelectorAll(".preview-action").forEach(btn => btn.style.display = "none");
}
function showButtons() {
  document.querySelectorAll(".preview-action").forEach(btn => btn.style.display = "inline-block");
}

async function downloadImage() {
  hideButtonsTemporarily();
  await new Promise(r => setTimeout(r, 100));
  html2canvas(document.getElementById("previewArea")).then(canvas => {
    const link = document.createElement("a");
    link.download = "emi-calculation.png";
    link.href = canvas.toDataURL("image/png");
    link.click();
    showButtons();
  });
}

async function downloadPDF() {
  hideButtonsTemporarily();
  await new Promise(r => setTimeout(r, 100));
  html2canvas(document.getElementById("previewArea")).then(canvas => {
    const imgData = canvas.toDataURL("image/png");
    const pdf = new jspdf.jsPDF("p", "pt", "a4");
    const ratio = Math.min(pdf.internal.pageSize.getWidth() / canvas.width, pdf.internal.pageSize.getHeight() / canvas.height);
    pdf.addImage(imgData, "PNG", 0, 0, canvas.width * ratio, canvas.height * ratio);
    pdf.save("emi-calculation.pdf");
    showButtons();
  });
}

function sharePreview() {
  hideButtonsTemporarily();
  setTimeout(() => {
    html2canvas(document.getElementById("previewArea")).then(canvas => {
      canvas.toBlob(blob => {
        const file = new File([blob], "emi-calculation.png", { type: "image/png" });
        if (navigator.canShare && navigator.canShare({ files: [file] })) {
          navigator.share({
            title: "EMI Calculation",
            text: "Check out my EMI result from Pratix Finance!",
            files: [file],
          }).catch(() => showButtons());
        } else {
          alert("Sharing not supported on this device.");
          showButtons();
        }
      });
    });
  }, 100);
}

// Placeholder â€“ you can add your translation system here
function changeLanguage() {
  const lang = document.getElementById("language").value;
  // You can add your offline translation logic here (like JSON map)
  alert("Language change logic not implemented in this version.");
}
</script>
</body>
</html>
