<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EMI Calculator - Pratix Finance</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" />
  <style>
    body { background: linear-gradient(to bottom right, #e0f2fe, #f0fdf4); }
    .card { background: white; border-radius: 1rem; padding: 1.5rem; box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1); }
    canvas { max-width: 100% !important; height: auto !important; }
  </style>
</head>
<body class="text-gray-800">
  <div class="max-w-2xl mx-auto mt-6 p-4">
    <div class="flex justify-center mb-4">
      <img src="logo.png" alt="Logo" class="h-12">
    </div>
    <div class="card">
      <h1 class="text-2xl font-bold text-center mb-4">üìÖ EMI Calculator</h1>

      <label for="language" class="block mb-2 font-medium">üåê Language:</label>
      <select id="language" onchange="changeLanguage()" class="w-full mb-4 p-2 border rounded">
        <option value="en">English</option>
        <option value="hi">Hindi</option>
        <option value="bn">Bengali</option>
        <option value="fr">French</option>
        <option value="ru">Russian</option>
        <option value="es">Spanish</option>
        <option value="ja">Japanese</option>
        <option value="ko">Korean</option>
      </select>

      <div class="mb-4">
        <label id="loanAmountLabel" class="block font-medium mb-1">üí∞ Loan Amount</label>
        <input type="number" id="loanAmount" class="w-full p-2 border rounded" />
      </div>
      <div class="mb-4">
        <label id="interestRateLabel" class="block font-medium mb-1">üìà Annual Interest Rate (%)</label>
        <input type="number" id="interestRate" class="w-full p-2 border rounded" />
      </div>
      <div class="mb-4">
        <label id="loanTenureLabel" class="block font-medium mb-1">üìÖ Loan Tenure (in months)</label>
        <input type="number" id="loanTenure" class="w-full p-2 border rounded" />
      </div>

      <div class="flex justify-between space-x-2 mb-4">
        <button onclick="calculateEMI()" id="calculateBtn" class="bg-blue-600 text-white px-4 py-2 rounded w-1/3">Calculate</button>
        <button onclick="resetForm()" id="resetBtn" class="bg-gray-400 text-white px-4 py-2 rounded w-1/3">Reset</button>
        <button onclick="showPreview()" id="previewBtn" class="bg-green-600 text-white px-4 py-2 rounded w-1/3">Preview</button>
      </div>

      <h2 id="resultTitle" class="text-xl font-semibold mb-2">üìä EMI Result</h2>
      <p id="emiResult"></p>
      <p id="totalPaymentResult"></p>
      <p id="totalInterestResult"></p>

      <div class="my-4">
        <canvas id="emiPieChart"></canvas>
        <canvas id="emiBarChart" class="mt-4"></canvas>
      </div>
    </div>

    <div id="previewArea" class="card mt-6 hidden">
      <div id="previewContent"></div>
      <div class="my-4">
        <canvas id="previewPieChart"></canvas>
        <canvas id="previewBarChart" class="mt-4"></canvas>
      </div>
      <div class="flex justify-between space-x-2 mt-4">
        <button onclick="downloadImage()" class="bg-blue-600 text-white px-4 py-2 rounded w-1/3">Download Image</button>
        <button onclick="downloadPDF()" class="bg-red-600 text-white px-4 py-2 rounded w-1/3">Download PDF</button>
        <button onclick="sharePreview()" class="bg-green-600 text-white px-4 py-2 rounded w-1/3">Share</button>
      </div>
    </div>

    <footer class="text-center text-sm text-gray-500 mt-6">
      Contact: <a href="mailto:pratixfinance4@gmail.com" class="text-blue-600 underline">pratixfinance4@gmail.com</a>
    </footer>
  </div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
  let pieChart, barChart, previewPie, previewBar;
  function calculateEMI() {
    const P = parseFloat(document.getElementById("loanAmount").value);
    const annualRate = parseFloat(document.getElementById("interestRate").value);
    const months = parseInt(document.getElementById("loanTenure").value);
    const r = annualRate / 12 / 100;
    const emi = P * r * Math.pow(1 + r, months) / (Math.pow(1 + r, months) - 1);
    const total = emi * months;
    const interest = total - P;

    document.getElementById("emiResult").innerText = `EMI: ‚Çπ${emi.toFixed(2)}`;
    document.getElementById("totalPaymentResult").innerText = `Total Payment: ‚Çπ${total.toFixed(2)}`;
    document.getElementById("totalInterestResult").innerText = `Total Interest: ‚Çπ${interest.toFixed(2)}`;

    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();

    const ctx1 = document.getElementById("emiPieChart").getContext("2d");
    pieChart = new Chart(ctx1, {
      type: "pie",
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{ data: [P, interest], backgroundColor: ["#34d399", "#f87171"] }]
      }
    });

    const ctx2 = document.getElementById("emiBarChart").getContext("2d");
    barChart = new Chart(ctx2, {
      type: "bar",
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{ label: "‚Çπ Amount", data: [P, interest], backgroundColor: ["#3b82f6", "#f59e0b"] }]
      }
    });
  }

  function resetForm() {
    document.getElementById("loanAmount").value = "";
    document.getElementById("interestRate").value = "";
    document.getElementById("loanTenure").value = "";
    document.getElementById("emiResult").innerText = "";
    document.getElementById("totalPaymentResult").innerText = "";
    document.getElementById("totalInterestResult").innerText = "";
    if (pieChart) pieChart.destroy();
    if (barChart) barChart.destroy();
  }

  function showPreview() {
    const P = parseFloat(document.getElementById("loanAmount").value);
    const r = parseFloat(document.getElementById("interestRate").value);
    const m = parseInt(document.getElementById("loanTenure").value);
    const rate = r / 12 / 100;
    const emi = P * rate * Math.pow(1 + rate, m) / (Math.pow(1 + rate, m) - 1);
    const total = emi * m;
    const interest = total - P;

    document.getElementById("previewContent").innerHTML = `
      <img src='logo.png' class='h-12 mx-auto mb-2' />
      <h2 class='text-xl font-bold text-center mb-2'>üìÖ EMI Calculator</h2>
      <p><strong>Loan Amount:</strong> ‚Çπ${P}</p>
      <p><strong>Interest Rate:</strong> ${r}%</p>
      <p><strong>Tenure:</strong> ${m} months</p>
      <p><strong>EMI:</strong> ‚Çπ${emi.toFixed(2)}</p>
      <p><strong>Total Payment:</strong> ‚Çπ${total.toFixed(2)}</p>
      <p><strong>Total Interest:</strong> ‚Çπ${interest.toFixed(2)}</p>
    `;

    document.getElementById("previewArea").classList.remove("hidden");

    if (previewPie) previewPie.destroy();
    if (previewBar) previewBar.destroy();

    const ctx3 = document.getElementById("previewPieChart").getContext("2d");
    previewPie = new Chart(ctx3, {
      type: "pie",
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{ data: [P, interest], backgroundColor: ["#10b981", "#ef4444"] }]
      }
    });

    const ctx4 = document.getElementById("previewBarChart").getContext("2d");
    previewBar = new Chart(ctx4, {
      type: "bar",
      data: {
        labels: ["Principal", "Interest"],
        datasets: [{ label: "‚Çπ Amount", data: [P, interest], backgroundColor: ["#3b82f6", "#f59e0b"] }]
      }
    });
  }

  function downloadImage() {
    html2canvas(document.getElementById("previewArea")).then(canvas => {
      const link = document.createElement("a");
      link.download = "emi_preview.png";
      link.href = canvas.toDataURL();
      link.click();
    });
  }

  function downloadPDF() {
    html2canvas(document.getElementById("previewArea")).then(canvas => {
      const imgData = canvas.toDataURL("image/png");
      const pdf = new jspdf.jsPDF();
      const imgProps = pdf.getImageProperties(imgData);
      const pdfWidth = pdf.internal.pageSize.getWidth();
      const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
      pdf.addImage(imgData, "PNG", 0, 0, pdfWidth, pdfHeight);
      pdf.save("emi_preview.pdf");
    });
  }

  function sharePreview() {
    const text = "Check out my EMI calculation result from Pratix Finance!";
    if (navigator.share) {
      navigator.share({ title: "EMI Result", text, url: window.location.href });
    } else {
      alert("Share not supported on this browser. Please copy the link.");
    }
  }

  const translations = {
    en: ["Loan Amount", "Annual Interest Rate (%)", "Loan Tenure (in months)", "Calculate", "Reset", "Preview", "EMI Result"],
    hi: ["‡§∞‡§ø‡§£ ‡§∞‡§æ‡§∂‡§ø", "‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§¨‡•ç‡§Ø‡§æ‡§ú ‡§¶‡§∞ (%)", "‡§∞‡§ø‡§£ ‡§ï‡•Ä ‡§Ö‡§µ‡§ß‡§ø (‡§Æ‡§æ‡§π‡•ã‡§Ç ‡§Æ‡•á‡§Ç)", "‡§ó‡§£‡§®‡§æ", "‡§∞‡•Ä‡§∏‡•á‡§ü", "‡§™‡•Ç‡§∞‡•ç‡§µ‡•Ä‡§ï‡•ç‡§∑‡§£‡§æ", "EMI ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ"]
    // Add more translations here
  };

  function changeLanguage() {
    const lang = document.getElementById("language").value;
    const labels = translations[lang] || translations.en;
    document.getElementById("loanAmountLabel").innerText = labels[0];
    document.getElementById("interestRateLabel").innerText = labels[1];
    document.getElementById("loanTenureLabel").innerText = labels[2];
    document.getElementById("calculateBtn").innerText = labels[3];
    document.getElementById("resetBtn").innerText = labels[4];
    document.getElementById("previewBtn").innerText = labels[5];
    document.getElementById("resultTitle").innerText = labels[6];
  }
</script>
</body>
</html>
