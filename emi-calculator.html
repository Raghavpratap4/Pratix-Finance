<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Advanced EMI Calculator | Pratix Finance</title>
  <link rel="manifest" href="manifest.json" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(135deg, #3f0d65, #5b21b6);
      color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 1rem;
    }
    .container {
      width: 100%;
      max-width: 500px;
      background: rgba(17, 17, 17, 0.75);
      border-radius: 20px;
      backdrop-filter: blur(10px);
      padding: 2rem;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }
    .header h2 {
      margin: 0;
      font-weight: 600;
      font-size: 1.5rem;
    }
    .lang-select {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      border-radius: 10px;
      padding: 6px;
    }
    .input-group {
      margin-bottom: 1rem;
    }
    .input-group label {
      font-weight: 500;
      margin-bottom: 5px;
      display: block;
    }
    .input-group input,
    .input-group select {
      width: 100%;
      padding: 12px;
      border-radius: 12px;
      border: none;
      font-size: 1rem;
      background: rgba(255, 255, 255, 0.1);
      color: #fff;
    }
    .input-group input::placeholder {
      color: #ccc;
    }
    .buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      margin: 1.5rem 0;
    }
    button {
      flex: 1;
      background: #6366f1;
      border: none;
      border-radius: 12px;
      padding: 12px;
      font-size: 1rem;
      color: white;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    button:hover {
      background: #4f46e5;
    }
    .summary {
      background: rgba(255, 255, 255, 0.05);
      border-radius: 16px;
      padding: 1rem;
      margin-top: 1.5rem;
    }
    .summary p {
      margin: 8px 0;
    }
    .toggle-row {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin: 1rem 0;
    }
    canvas {
      margin-top: 1rem;
      width: 100% !important;
      height: auto !important;
    }
    footer {
      text-align: center;
      margin-top: 2rem;
      font-size: 0.85rem;
      opacity: 0.6;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h2 id="title">Advanced EMI Calculator</h2>
      <select class="lang-select" id="languageSelector" onchange="changeLanguage(this.value)">
        <option value="en">üá¨üáß English</option>
        <option value="hi">üáÆüá≥ Hindi</option>
        <option value="bn">üáßüá© Bengali</option>
        <option value="fr">üá´üá∑ French</option>
        <option value="ru">üá∑üá∫ Russian</option>
        <option value="de">üá©üá™ German</option>
        <option value="es">üá™üá∏ Spanish</option>
        <option value="ko">üá∞üá∑ Korean</option>
        <option value="ja">üáØüáµ Japanese</option>
      </select>
    </div>

    <div class="input-group">
      <label id="label-loan">Loan Amount</label>
      <input type="number" id="loanAmount" placeholder="Enter amount" />
    </div>
    <div class="input-group">
      <label id="label-rate">Interest Rate (%)</label>
      <input type="number" id="interestRate" placeholder="e.g. 8.5" />
    </div>
    <div class="input-group">
      <label id="label-term">Loan Term (years)</label>
      <input type="number" id="loanTerm" placeholder="e.g. 10" />
    </div>
    <div class="input-group">
      <label id="label-freq">Prepayment Frequency</label>
      <select id="prepayFreq">
        <option value="once">Once</option>
        <option value="yearly">Yearly</option>
      </select>
    </div>
    <div class="input-group">
      <label id="label-extra">Extra Payment (‚Çπ)</label>
      <input type="number" id="extraPayment" placeholder="e.g. 50000" />
    </div>
    <div class="input-group">
      <label id="label-start">Start From Year</label>
      <select id="startYear">
        <option value="1">Year 1</option>
        <option value="2">Year 2</option>
        <option value="3">Year 3</option>
        <option value="4">Year 4</option>
      </select>
    </div>

    <div class="buttons">
      <button onclick="calculateEMI()" id="btn-calculate">Calculate</button>
      <button onclick="showMonthlySchedule()" id="btn-monthly">Monthly Table</button>
      <button onclick="showCompareView()" id="btn-compare">Compare Loans</button>
    </div>

    <div class="summary">
      <p><strong id="label-emi">EMI:</strong> ‚Çπ<span id="emi">0</span>/month</p>
      <p><strong id="label-interest">Total Interest:</strong> ‚Çπ<span id="interest">0</span></p>
      <p><strong id="label-payment">Total Payment:</strong> ‚Çπ<span id="payment">0</span></p>
      <button onclick="sendReminder()" id="btn-reminder">üì© Send Reminder</button>
    </div>

    <div class="toggle-row">
      <div>
        <input type="radio" name="chartType" id="barChart" value="bar" checked onchange="toggleChartType()">
        <label for="barChart" id="label-bar">Bar Chart</label>
      </div>
      <div>
        <input type="radio" name="chartType" id="pieChart" value="doughnut" onchange="toggleChartType()">
        <label for="pieChart" id="label-pie">Pie Chart</label>
      </div>
      <div>
        <input type="radio" name="chartType" id="lineChart" value="line" onchange="toggleChartType()">
        <label for="lineChart" id="label-line">Line Chart</label>
      </div>
    </div>

    <canvas id="emiChart" height="200"></canvas>
  </div>

  <footer>
    ¬© 2025 Pratix Finance ‚Äî All rights reserved
  </footer>
<script>
const translations = {
  en: {
    title: "Advanced EMI Calculator",
    "label-loan": "Loan Amount",
    "label-rate": "Interest Rate (%)",
    "label-term": "Loan Term (years)",
    "label-freq": "Prepayment Frequency",
    "label-extra": "Extra Payment (‚Çπ)",
    "label-start": "Start From Year",
    "btn-calculate": "Calculate",
    "btn-monthly": "Monthly Table",
    "btn-compare": "Compare Loans",
    "label-emi": "EMI:",
    "label-interest": "Total Interest:",
    "label-payment": "Total Payment:",
    "btn-reminder": "üì© Send Reminder",
    "label-bar": "Bar Chart",
    "label-pie": "Pie Chart",
    "label-line": "Line Chart"
  },
  hi: {
    title: "‡§â‡§®‡•ç‡§®‡§§ EMI ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞",
    "label-loan": "‡§ã‡§£ ‡§∞‡§æ‡§∂‡§ø",
    "label-rate": "‡§¨‡•ç‡§Ø‡§æ‡§ú ‡§¶‡§∞ (%)",
    "label-term": "‡§ã‡§£ ‡§Ö‡§µ‡§ß‡§ø (‡§µ‡§∞‡•ç‡§∑‡•ã‡§Ç ‡§Æ‡•á‡§Ç)",
    "label-freq": "‡§™‡•Ç‡§∞‡•ç‡§µ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§Ü‡§µ‡•É‡§§‡•ç‡§§‡§ø",
    "label-extra": "‡§Ö‡§§‡§ø‡§∞‡§ø‡§ï‡•ç‡§§ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® (‚Çπ)",
    "label-start": "‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§∑",
    "btn-calculate": "‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç",
    "btn-monthly": "‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§§‡§æ‡§≤‡§ø‡§ï‡§æ",
    "btn-compare": "‡§ã‡§£ ‡§§‡•Å‡§≤‡§®‡§æ",
    "label-emi": "EMI:",
    "label-interest": "‡§ï‡•Å‡§≤ ‡§¨‡•ç‡§Ø‡§æ‡§ú:",
    "label-payment": "‡§ï‡•Å‡§≤ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®:",
    "btn-reminder": "üì© ‡§Ö‡§®‡•Å‡§∏‡•ç‡§Æ‡§æ‡§∞‡§ï ‡§≠‡•á‡§ú‡•á‡§Ç",
    "label-bar": "‡§¨‡§æ‡§∞ ‡§ö‡§æ‡§∞‡•ç‡§ü",
    "label-pie": "‡§™‡§æ‡§à ‡§ö‡§æ‡§∞‡•ç‡§ü",
    "label-line": "‡§≤‡§æ‡§á‡§® ‡§ö‡§æ‡§∞‡•ç‡§ü"
  },
  bn: {
    title: "‡¶â‡¶®‡ßç‡¶®‡¶§ EMI ‡¶ï‡ßç‡¶Ø‡¶æ‡¶≤‡¶ï‡ßÅ‡¶≤‡ßá‡¶ü‡¶∞",
    "label-loan": "‡¶ã‡¶£‡ßá‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£",
    "label-rate": "‡¶∏‡ßÅ‡¶¶‡ßá‡¶∞ ‡¶π‡¶æ‡¶∞ (%)",
    "label-term": "‡¶ã‡¶£‡ßá‡¶∞ ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶ (‡¶¨‡¶õ‡¶∞)",
    "label-freq": "‡¶™‡ßç‡¶∞‡¶ø‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶´‡ßç‡¶∞‡¶ø‡¶ï‡ßã‡¶Ø‡¶º‡ßá‡¶®‡ßç‡¶∏‡¶ø",
    "label-extra": "‡¶Ö‡¶§‡¶ø‡¶∞‡¶ø‡¶ï‡ßç‡¶§ ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü (‚Çπ)",
    "label-start": "‡¶ï‡ßã‡¶® ‡¶¨‡¶õ‡¶∞ ‡¶•‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶∞‡ßÅ",
    "btn-calculate": "‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶ï‡¶∞‡ßÅ‡¶®",
    "btn-monthly": "‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶ü‡ßá‡¶¨‡¶ø‡¶≤",
    "btn-compare": "‡¶ã‡¶£ ‡¶§‡ßÅ‡¶≤‡¶®‡¶æ",
    "label-emi": "EMI:",
    "label-interest": "‡¶Æ‡ßã‡¶ü ‡¶∏‡ßÅ‡¶¶:",
    "label-payment": "‡¶Æ‡ßã‡¶ü ‡¶™‡ßá‡¶Æ‡ßá‡¶®‡ßç‡¶ü:",
    "btn-reminder": "üì© ‡¶Ö‡¶®‡ßÅ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡¶ï ‡¶™‡¶æ‡¶†‡¶æ‡¶®",
    "label-bar": "‡¶¨‡¶æ‡¶∞ ‡¶ö‡¶æ‡¶∞‡ßç‡¶ü",
    "label-pie": "‡¶™‡¶æ‡¶á ‡¶ö‡¶æ‡¶∞‡ßç‡¶ü",
    "label-line": "‡¶≤‡¶æ‡¶á‡¶® ‡¶ö‡¶æ‡¶∞‡ßç‡¶ü"
  },
  fr: {
    title: "Calculateur EMI Avanc√©",
    "label-loan": "Montant du pr√™t",
    "label-rate": "Taux d'int√©r√™t (%)",
    "label-term": "Dur√©e du pr√™t (ann√©es)",
    "label-freq": "Fr√©quence de paiement",
    "label-extra": "Paiement suppl√©mentaire (‚Ç¨)",
    "label-start": "Commencer √† partir de l'ann√©e",
    "btn-calculate": "Calculer",
    "btn-monthly": "Tableau mensuel",
    "btn-compare": "Comparer les pr√™ts",
    "label-emi": "EMI:",
    "label-interest": "Int√©r√™t total:",
    "label-payment": "Paiement total:",
    "btn-reminder": "üì© Envoyer un rappel",
    "label-bar": "Graphique √† barres",
    "label-pie": "Camembert",
    "label-line": "Graphique en ligne"
  },
  ru: {
    title: "–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π EMI –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä",
    "label-loan": "–°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞",
    "label-rate": "–ü—Ä–æ—Ü–µ–Ω—Ç–Ω–∞—è —Å—Ç–∞–≤–∫–∞ (%)",
    "label-term": "–°—Ä–æ–∫ –∫—Ä–µ–¥–∏—Ç–∞ (–ª–µ—Ç)",
    "label-freq": "–ß–∞—Å—Ç–æ—Ç–∞ –¥–æ—Å—Ä–æ—á–Ω–æ–π –≤—ã–ø–ª–∞—Ç—ã",
    "label-extra": "–î–æ–ø–ª–∞—Ç–∞ (‚ÇΩ)",
    "label-start": "–ù–∞—á–∞—Ç—å —Å –≥–æ–¥–∞",
    "btn-calculate": "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å",
    "btn-monthly": "–ï–∂–µ–º–µ—Å—è—á–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞",
    "btn-compare": "–°—Ä–∞–≤–Ω–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã",
    "label-emi": "EMI:",
    "label-interest": "–û–±—â–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã:",
    "label-payment": "–û–±—â–∞—è –≤—ã–ø–ª–∞—Ç–∞:",
    "btn-reminder": "üì© –û—Ç–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ",
    "label-bar": "–°—Ç–æ–ª–±—á–∞—Ç–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞",
    "label-pie": "–ö—Ä—É–≥–æ–≤–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞",
    "label-line": "–õ–∏–Ω–µ–π–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞"
  },
  de: {
    title: "Erweiterter EMI-Rechner",
    "label-loan": "Darlehensbetrag",
    "label-rate": "Zinssatz (%)",
    "label-term": "Darlehenslaufzeit (Jahre)",
    "label-freq": "Sonderzahlungsfrequenz",
    "label-extra": "Zusatzzahlung (‚Ç¨)",
    "label-start": "Ab welchem Jahr",
    "btn-calculate": "Berechnen",
    "btn-monthly": "Monatliche Tabelle",
    "btn-compare": "Darlehen vergleichen",
    "label-emi": "EMI:",
    "label-interest": "Gesamtzinsen:",
    "label-payment": "Gesamtzahlung:",
    "btn-reminder": "üì© Erinnerung senden",
    "label-bar": "Balkendiagramm",
    "label-pie": "Kreisdiagramm",
    "label-line": "Liniendiagramm"
  },
  es: {
    title: "Calculadora EMI Avanzada",
    "label-loan": "Monto del pr√©stamo",
    "label-rate": "Tasa de inter√©s (%)",
    "label-term": "Plazo del pr√©stamo (a√±os)",
    "label-freq": "Frecuencia de prepago",
    "label-extra": "Pago adicional (‚Ç¨)",
    "label-start": "Comenzar desde el a√±o",
    "btn-calculate": "Calcular",
    "btn-monthly": "Tabla mensual",
    "btn-compare": "Comparar pr√©stamos",
    "label-emi": "EMI:",
    "label-interest": "Inter√©s total:",
    "label-payment": "Pago total:",
    "btn-reminder": "üì© Enviar recordatorio",
    "label-bar": "Gr√°fico de barras",
    "label-pie": "Gr√°fico circular",
    "label-line": "Gr√°fico de l√≠neas"
  },
  ko: {
    title: "Í≥†Í∏â EMI Í≥ÑÏÇ∞Í∏∞",
    "label-loan": "ÎåÄÏ∂ú Í∏àÏï°",
    "label-rate": "Ïù¥ÏûêÏú® (%)",
    "label-term": "ÎåÄÏ∂ú Í∏∞Í∞Ñ (ÎÖÑ)",
    "label-freq": "Ï°∞Í∏∞ ÏÉÅÌôò ÎπàÎèÑ",
    "label-extra": "Ï∂îÍ∞Ä ÎÇ©ÏûÖ (‚Ç©)",
    "label-start": "ÏãúÏûë Ïó∞ÎèÑ",
    "btn-calculate": "Í≥ÑÏÇ∞",
    "btn-monthly": "ÏõîÎ≥Ñ ÌÖåÏù¥Î∏î",
    "btn-compare": "ÎåÄÏ∂ú ÎπÑÍµê",
    "label-emi": "EMI:",
    "label-interest": "Ï¥ù Ïù¥Ïûê:",
    "label-payment": "Ï¥ù ÎÇ©ÏûÖ:",
    "btn-reminder": "üì© ÏïåÎ¶º Î≥¥ÎÇ¥Í∏∞",
    "label-bar": "ÎßâÎåÄ Ï∞®Ìä∏",
    "label-pie": "ÏõêÌòï Ï∞®Ìä∏",
    "label-line": "ÏÑ†Ìòï Ï∞®Ìä∏"
  },
  ja: {
    title: "È´òÂ∫¶„Å™EMIË®àÁÆóÊ©ü",
    "label-loan": "„É≠„Éº„É≥ÈáëÈ°ç",
    "label-rate": "ÈáëÂà© (%)",
    "label-term": "„É≠„Éº„É≥ÊúüÈñìÔºàÂπ¥Ôºâ",
    "label-freq": "ÂâçÊâï„ÅÑ„ÅÆÈ†ªÂ∫¶",
    "label-extra": "ËøΩÂä†ÊîØÊâï„ÅÑ (¬•)",
    "label-start": "ÈñãÂßãÂπ¥",
    "btn-calculate": "Ë®àÁÆó",
    "btn-monthly": "ÊúàÊ¨°Ë°®",
    "btn-compare": "„É≠„Éº„É≥„ÇíÊØîËºÉ",
    "label-emi": "EMI:",
    "label-interest": "Á∑èÂà©ÊÅØ:",
    "label-payment": "Á∑èÊîØÊâïÈ°ç:",
    "btn-reminder": "üì© „É™„Éû„Ç§„É≥„ÉÄ„Éº„ÇíÈÄÅ‰ø°",
    "label-bar": "Ê£í„Ç∞„É©„Éï",
    "label-pie": "ÂÜÜ„Ç∞„É©„Éï",
    "label-line": "Êäò„ÇåÁ∑ö„Ç∞„É©„Éï"
  }
};

function changeLanguage(langCode) {
  const langData = translations[langCode] || translations["en"];
  for (const key in langData) {
    const el = document.getElementById(key);
    if (el) el.innerText = langData[key];
  }
  document.documentElement.lang = langCode;
}

function detectLanguage() {
  const lang = navigator.language.slice(0, 2);
  const supported = Object.keys(translations);
  const matched = supported.includes(lang) ? lang : "en";
  document.getElementById("languageSelector").value = matched;
  changeLanguage(matched);
}

window.onload = detectLanguage;
</script>
<script>
let currentChart = null;

function calculateEMI() {
  const loan = parseFloat(document.getElementById("loanAmount").value);
  const rate = parseFloat(document.getElementById("interestRate").value) / 12 / 100;
  const term = parseFloat(document.getElementById("loanTerm").value) * 12;

  if (isNaN(loan) || isNaN(rate) || isNaN(term)) return;

  const emi = (loan * rate * Math.pow(1 + rate, term)) / (Math.pow(1 + rate, term) - 1);
  const totalPayment = emi * term;
  const totalInterest = totalPayment - loan;

  document.getElementById("emiValue").innerText = "‚Çπ " + emi.toFixed(2);
  document.getElementById("interestValue").innerText = "‚Çπ " + totalInterest.toFixed(2);
  document.getElementById("totalValue").innerText = "‚Çπ " + totalPayment.toFixed(2);

  updateChart(loan, totalInterest);
}

function updateChart(principal, interest) {
  const ctx = document.getElementById("chartCanvas").getContext("2d");
  if (currentChart) currentChart.destroy();

  const chartType = document.querySelector('input[name="chartType"]:checked').value;

  currentChart = new Chart(ctx, {
    type: chartType,
    data: {
      labels: ["Principal", "Interest"],
      datasets: [{
        label: "EMI Breakdown",
        data: [principal, interest],
        backgroundColor: ["#4caf50", "#f44336"],
        borderWidth: 1
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: chartType !== 'bar' }
      }
    }
  });
}

document.getElementById("calculateBtn").addEventListener("click", calculateEMI);

// Handle Chart Toggle
document.querySelectorAll('input[name="chartType"]').forEach((radio) => {
  radio.addEventListener("change", () => {
    calculateEMI();
  });
});

// Language selector manual change
document.getElementById("languageSelector").addEventListener("change", function () {
  const selected = this.value;
  changeLanguage(selected);
});
</script>
</body>
</html>